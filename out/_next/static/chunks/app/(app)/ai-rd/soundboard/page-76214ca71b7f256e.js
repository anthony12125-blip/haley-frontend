(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{6178:function(e,t,s){Promise.resolve().then(s.bind(s,4924))},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:m="",children:u,...p}=s;return(0,r.createElement)("svg",{ref:l,...a,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),m].join(" "),...p},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},7515:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8688:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},2468:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4109:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2022:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6463:function(e,t,s){"use strict";var r=s(1169);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},4924:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(7437),a=s(2265),n=s(6463),l=s(2468),i=s(4109),o=s(1066);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,o.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=s(2022);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,o.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var u=s(7515),p=s(8688),x=s(1798);let h="should";async function y(e){let{claims:t,llmCall:s,temperature:r}=e;if(!t||0===t.length)return{questions:[],skippedClaimIds:[],raw:""};let a=t.filter(e=>e&&e.id&&e.statement).map(e=>{var t,s;return{id:String(e.id).trim(),statement:String(e.statement).trim(),type:null!==(t=e.type)&&void 0!==t?t:"other",priority:null!==(s=e.priority)&&void 0!==s?s:h}}),n=function(e){let t=[];for(let s of(t.push("CLAIMS:"),e))t.push("- ".concat(s.id," | priority=").concat(s.priority," | type=").concat(s.type," | statement=").concat(s.statement.replaceAll("|","\\|")));return t.push(""),t.push("OUTPUT FORMAT (one line each):"),t.push("SKIP|claim=C1|why=..."),t.push("Q|claim=C1|priority=must|kind=choice|text=...|options=a;b;c|why=..."),t.push(""),t.push("HARD CONSTRAINTS:"),t.push("- Ask 0–2 questions per claim."),t.push("- If you ask a question, keep it short."),t.push("- For kind=choice, include 2–5 options."),t.join("\n")}(a),l=await s({system:"You convert feasibility claims into the MINIMUM questions needed from the user.\nRules:\n1) If a claim can be validated by browsing/docs/prototyping without user-specific info, output SKIP for that claim.\n2) If user info is needed, ask at most 2 questions per claim.\n3) Prefer multiple-choice. Keep choices short.\n4) Output ONLY the required line format. No prose, no markdown, no JSON.\n5) Use priorities from the claim when present. If missing, use should.",user:n,temperature:null!=r?r:.2}),{questions:i,skippedClaimIds:o}=function(e,t){let s=new Set(t.map(e=>e.id)),r=new Map(t.map(e=>[e.id,e.priority])),a=[],n=[];for(let t of(e||"").split("\n").map(e=>e.trim()).filter(e=>e.length>0)){if(t.startsWith("SKIP|")){let e=g(t).claim;e&&s.has(e)&&n.push(e);continue}if(t.startsWith("Q|")){let e=g(t),n=e.claim;if(!n||!s.has(n))continue;let l=e.priority||r.get(n)||h,i=e.kind||"text",o=e.text;if(!o)continue;let c={claimId:n,priority:l,kind:i,question:o,why:e.why||void 0};if("choice"===i){let t=(e.options||"").split(";").map(e=>e.trim()).filter(Boolean);t.length>=2?c.options=t:c.kind="text"}a.push(c)}}let l=new Map;for(let e of a){let t=l.get(e.claimId)||[];t.push(e),l.set(e.claimId,t)}let i=[];for(let[e,t]of l.entries())i.push(...t.slice(0,2));let o={must:0,should:1,could:2};return i.sort((e,t)=>{var s,r;let a=null!==(s=o[e.priority])&&void 0!==s?s:9,n=null!==(r=o[t.priority])&&void 0!==r?r:9;return a!==n?a-n:e.claimId.localeCompare(t.claimId)}),{questions:i,skippedClaimIds:Array.from(new Set(n))}}(l,a);return{questions:i.map((e,t)=>({...e,id:"Q".concat(t+1)})),skippedClaimIds:o,raw:l}}function g(e){let t=e.split("|").map(e=>e.trim()),s={};for(let e of t.slice(1)){let t=e.indexOf("=");if(-1===t)continue;let r=e.slice(0,t).trim(),a=e.slice(t+1).trim();s[r]=a.replaceAll("\\|","|")}return s}var f=s(8243);function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"claude";return async t=>{let{system:s,user:r,temperature:a}=t,n="[System Instructions]\n".concat(s,"\n\n[User Query]\n").concat(r);try{let t="";return new Promise((s,r)=>{(0,f.bG)(n,e,e=>{t+=e},e=>{if(t)s(t);else{var a,n;let t=(null===(a=e.result)||void 0===a?void 0:a.response)||(null===(n=e.result)||void 0===n?void 0:n.content)||"";"string"==typeof t?s(t):t&&"object"==typeof t&&"text"in t?s(String(t.text)):r(Error("Invalid response format from LLM"))}},e=>{r(Error(e||"LLM call failed"))})})}catch(e){throw console.error("[LLMAdapter] Error:",e),e}}}function v(){(0,n.useRouter)();let[e,t]=(0,a.useState)(""),[s,o]=(0,a.useState)(""),[h,g]=(0,a.useState)([]),[v,j]=(0,a.useState)([]),[N,k]=(0,a.useState)({}),[w,S]=(0,a.useState)([]),[E,A]=(0,a.useState)("input"),[D,C]=(0,a.useState)(!1),[T,I]=(0,a.useState)(null),[R,M]=(0,a.useState)(null),O=async()=>{I(null),C(!0);try{let e=b("claude"),t=await y({claims:h,llmCall:e,temperature:.2});if(console.log("[Soundboard] Questionize result:",t),0===t.questions.length){j([]),C(!1),P();return}j(t.questions),A("questions")}catch(e){console.error("[Soundboard] Error generating questions:",e),I("Couldn't generate questions. Try again.")}finally{C(!1)}},L=(e,t)=>{k(s=>({...s,[e]:t}))},P=async()=>{I(null),C(!0);try{let t=b("claude"),r=_(e,s,h,v,N),a=await t({system:"You are an R&D implementation planner. Generate actionable Deltas with routing info for AI vs human tasks.",user:"Based on this R&D analysis, generate implementation Deltas (actionable work items).\n\n".concat(r,"\n\nOutput format (one Delta per line):\nDELTA|id=D1|title=...|description=...|claims=C1,C2|priority=high|effort=medium|type=llm|assignedTo=claude|blockedBy=\n\nRules:\n- Each Delta should address one or more claims\n- Priority: high (must-have), medium (should-have), low (nice-to-have)\n- Effort: small (< 1 day), medium (1-3 days), large (> 3 days)\n- Type: 'llm' if AI can do it (coding, analysis, writing), 'human' if user must do it (decisions, external actions, approvals)\n- assignedTo: For 'llm' type, suggest: 'claude' (complex reasoning), 'gemini' (fast tasks), 'gpt' (coding). For 'human' type, use 'user'\n- blockedBy: Comma-separated Delta IDs this depends on (e.g., D1,D2). Leave empty if no dependencies.\n- Generate 4-8 Deltas covering the key implementation steps\n- Order by dependency (independent tasks first), then by priority\n\nOutput ONLY the DELTA lines, no other text."),temperature:.3});console.log("[Soundboard] Delta generation result:",a);let n=Z(a);if(0===n.length){let e=B(h);S(e)}else S(n);sessionStorage.setItem("rd_soundboard_session",JSON.stringify({userIdea:e,successCriteria:s,claims:h,questions:v,answers:N,deltas:n.length>0?n:B(h),timestamp:new Date().toISOString()})),A("deltas")}catch(e){console.error("[Soundboard] Error generating deltas:",e),S(B(h)),A("deltas")}finally{C(!1)}},_=(e,t,s,r,a)=>{let n="PROJECT: ".concat(e,"\n");return t&&(n+="SUCCESS CRITERIA: ".concat(t,"\n")),n+="\nCLAIMS:\n",s.forEach(e=>{n+="- ".concat(e.id,": ").concat(e.statement," [").concat(e.priority,"]\n")}),n+="\nUSER ANSWERS:\n",r.forEach(e=>{let t=a[e.id]||"(not answered)";n+="- ".concat(e.id," (").concat(e.claimId,"): ").concat(e.question,"\n  Answer: ").concat(t,"\n")}),n},Z=e=>{let t=[];return(e||"").split("\n").filter(e=>e.trim().startsWith("DELTA|")).forEach(e=>{let s={};e.split("|").slice(1).forEach(e=>{let t=e.indexOf("=");t>0&&(s[e.slice(0,t).trim()]=e.slice(t+1).trim())}),s.id&&s.title&&t.push({id:s.id,title:s.title,description:s.description||"",claimIds:(s.claims||"").split(",").map(e=>e.trim()).filter(Boolean),priority:s.priority||"medium",effort:s.effort||"medium",deltaType:s.type||"llm",assignedTo:s.assignedTo||("human"===s.type?"user":"claude"),status:"pending",blockedBy:(s.blockedBy||"").split(",").map(e=>e.trim()).filter(Boolean),output:void 0})}),t},B=e=>e.slice(0,5).map((e,t)=>({id:"D".concat(t+1),title:"Address ".concat(e.type," requirements"),description:e.statement,claimIds:[e.id],priority:"must"===e.priority?"high":"should"===e.priority?"medium":"low",effort:"medium",deltaType:0===t?"human":"llm",assignedTo:0===t?"user":"claude",status:"pending",blockedBy:t>1?["D1"]:[],output:void 0})),z=async()=>{A("building"),I(null);let t=[...w],s=async s=>{let r=t[s];if("human"===r.deltaType){t[s]={...r,status:"pending"},S([...t]);return}if((r.blockedBy||[]).some(e=>{let s=t.find(t=>t.id===e);return s&&"complete"!==s.status})){t[s]={...r,status:"blocked"},S([...t]);return}t[s]={...r,status:"in-progress"},S([...t]),M(r.id);try{let a=r.assignedTo||"claude",n="Complete this implementation task:\n\nPROJECT: ".concat(e,"\nTASK: ").concat(r.title,"\nDESCRIPTION: ").concat(r.description,"\nRELATED CLAIMS: ").concat(r.claimIds.join(", "),"\n\nProvide a clear, actionable response that completes this task. If it's a coding task, provide code. If it's analysis, provide the analysis. Be concise but thorough."),l="";await new Promise((e,t)=>{(0,f.bG)(n,a,e=>{l+=e},()=>{e()},e=>{t(Error(e))})}),t[s]={...r,status:"complete",output:l},S([...t])}catch(e){console.error("[Soundboard] Error building delta ".concat(r.id,":"),e),t[s]={...r,status:"blocked",output:"Error: "+String(e)},S([...t])}};for(let e=0;e<t.length;e++)"llm"===t[e].deltaType&&"pending"===t[e].status&&await s(e);M(null),t.every(e=>"complete"===e.status)&&A("results")},q=e=>{let t=w.map(t=>t.id===e?{...t,status:"complete",output:"Completed by user"}:t),s=t.map(e=>"blocked"!==e.status||(e.blockedBy||[]).some(e=>{let s=t.find(t=>t.id===e);return s&&"complete"!==s.status})?e:{...e,status:"pending"});S(s),s.every(e=>"complete"===e.status)?A("results"):s.some(e=>"llm"===e.deltaType&&"pending"===e.status)&&z()},U=()=>{t(""),o(""),g([]),j([]),k({}),S([]),I(null),A("input"),M(null)};return(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto p-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"p-4 rounded-2xl bg-primary/10 border border-primary/20",children:(0,r.jsx)(x.Z,{className:"text-primary",style:{width:"48px",height:"48px"}})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gradient mb-2",children:"AI R&D Soundboard"}),(0,r.jsx)("p",{className:"text-secondary",children:"Tell me your idea, I'll figure out what questions to ask"})]}),T&&(0,r.jsxs)("div",{className:"glass border border-red-500/30 bg-red-500/10 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,r.jsx)(u.Z,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm text-red-400",children:T})]}),"input"===E&&(0,r.jsx)("div",{className:"glass rounded-xl border border-border p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-lg font-medium mb-3",children:"What do you want to build?"}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Describe your idea naturally...",rows:4,className:"w-full px-4 py-3 rounded-lg bg-panel-dark border border-border focus:border-primary focus:outline-none transition-colors resize-none text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2 text-secondary",children:["Success criteria ",(0,r.jsx)("span",{className:"text-xs opacity-60",children:"(optional)"})]}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"e.g., 'Under 500ms latency' or 'Works offline'",className:"w-full px-4 py-2 rounded-lg bg-panel-dark border border-border focus:border-primary focus:outline-none transition-colors text-sm"})]}),(0,r.jsx)("button",{onClick:()=>{I(null);let t=function(e,t){let s=e.trim(),r=t.trim();return s?[{id:"C1",type:"capability",priority:"must",statement:"Can ".concat(s," be implemented to meet ").concat(r," with current technology?")},{id:"C2",type:"integration",priority:"must",statement:"Does ".concat(s," require specific API integrations to achieve ").concat(r,"?")},{id:"C3",type:"ux",priority:"should",statement:"Can ".concat(s," provide acceptable UX while delivering ").concat(r,"?")},{id:"C4",type:"security",priority:"must",statement:"Are there security implications for ".concat(s," given ").concat(r,"?")},{id:"C5",type:"cost",priority:"should",statement:"What are the cost constraints for implementing ".concat(s," to achieve ").concat(r,"?")}]:[]}(e.trim(),s.trim()||"viable and user-friendly implementation");if(0===t.length){I("Tell me what you want to build first.");return}g(t),A("claims")},disabled:!e.trim(),className:"w-full px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium text-primary",children:"Start R&D Analysis"})]})}),"claims"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Generated Claims"}),(0,r.jsxs)("p",{className:"text-sm text-secondary",children:[h.length," feasibility claims identified"]})]}),(0,r.jsx)("div",{className:"space-y-3 mb-6",children:h.map(e=>(0,r.jsx)("div",{className:"glass-light rounded-lg p-4 border border-border/50",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-primary px-2 py-1 rounded bg-primary/10 flex-shrink-0",children:e.id}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:e.statement}),(0,r.jsxs)("div",{className:"flex gap-2 text-xs text-secondary",children:[(0,r.jsx)("span",{className:"px-2 py-0.5 rounded bg-panel-dark",children:e.type}),(0,r.jsx)("span",{className:"px-2 py-0.5 rounded bg-panel-dark",children:e.priority})]})]})]})},e.id))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:U,className:"flex-1 px-6 py-3 rounded-lg bg-panel-light hover:bg-panel-medium transition-colors text-sm font-medium",children:"Back"}),(0,r.jsxs)("button",{onClick:O,disabled:D,className:"flex-1 px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 disabled:opacity-50 transition-colors text-sm font-medium text-primary flex items-center justify-center gap-2",children:[D&&(0,r.jsx)(i.Z,{size:16,className:"animate-spin"}),"Generate Questions"]})]})]}),"questions"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"User Questions"}),(0,r.jsxs)("p",{className:"text-sm text-secondary",children:[v.length," questions need your input"]})]}),(0,r.jsx)("div",{className:"space-y-4 mb-6",children:v.map(e=>(0,r.jsxs)("div",{className:"glass-light rounded-lg p-4 border border-border/50",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-primary px-2 py-1 rounded bg-primary/10 flex-shrink-0",children:e.id}),(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("must"===e.priority?"bg-red-500/20 text-red-400":"should"===e.priority?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"),children:e.priority})]}),(0,r.jsx)("p",{className:"text-sm font-medium mb-1",children:e.question}),e.why&&(0,r.jsx)("p",{className:"text-xs text-secondary italic",children:e.why})]}),"choice"===e.kind&&e.options&&(0,r.jsx)("div",{className:"space-y-2",children:e.options.map(t=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:t,checked:N[e.id]===t,onChange:t=>L(e.id,t.target.value),className:"text-primary"}),(0,r.jsx)("span",{className:"text-sm",children:t})]},t))}),"boolean"===e.kind&&(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:"yes",checked:"yes"===N[e.id],onChange:t=>L(e.id,t.target.value),className:"text-primary"}),(0,r.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:"no",checked:"no"===N[e.id],onChange:t=>L(e.id,t.target.value),className:"text-primary"}),(0,r.jsx)("span",{className:"text-sm",children:"No"})]})]}),"number"===e.kind&&(0,r.jsx)("input",{type:"number",value:N[e.id]||"",onChange:t=>L(e.id,t.target.value),className:"w-full px-3 py-2 rounded-lg bg-panel-dark border border-border focus:border-primary focus:outline-none transition-colors text-sm",placeholder:"Enter a number"}),"text"===e.kind&&(0,r.jsx)("textarea",{value:N[e.id]||"",onChange:t=>L(e.id,t.target.value),rows:3,className:"w-full px-3 py-2 rounded-lg bg-panel-dark border border-border focus:border-primary focus:outline-none transition-colors text-sm resize-none",placeholder:"Enter your answer"})]},e.id))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>A("claims"),disabled:D,className:"flex-1 px-6 py-3 rounded-lg bg-panel-light hover:bg-panel-medium disabled:opacity-50 transition-colors text-sm font-medium",children:"Back"}),(0,r.jsxs)("button",{onClick:()=>{P()},disabled:D,className:"flex-1 px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 disabled:opacity-50 transition-colors text-sm font-medium text-primary flex items-center justify-center gap-2",children:[D&&(0,r.jsx)(i.Z,{size:16,className:"animate-spin"}),D?"Generating Deltas...":"Generate Deltas"]})]})]}),"deltas"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Implementation Deltas"}),(0,r.jsxs)("p",{className:"text-sm text-secondary",children:[w.filter(e=>"llm"===e.deltaType).length," AI tasks, ",w.filter(e=>"human"===e.deltaType).length," human tasks"]})]}),(0,r.jsx)("div",{className:"space-y-3 mb-6",children:w.map(e=>(0,r.jsx)("div",{className:"glass-light rounded-lg p-4 border border-border/50",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-primary px-2 py-1 rounded bg-primary/10 flex-shrink-0",children:e.id}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.title}),"human"===e.deltaType?(0,r.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 flex items-center gap-1",children:[(0,r.jsx)(d.Z,{size:12})," You"]}):(0,r.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-400 flex items-center gap-1",children:[(0,r.jsx)(p.Z,{size:12})," ",e.assignedTo]})]}),e.description&&(0,r.jsx)("p",{className:"text-xs text-secondary mb-2",children:e.description}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,r.jsx)("span",{className:"px-2 py-0.5 rounded ".concat("high"===e.priority?"bg-red-500/20 text-red-400":"medium"===e.priority?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"),children:e.priority}),(0,r.jsx)("span",{className:"px-2 py-0.5 rounded ".concat("large"===e.effort?"bg-purple-500/20 text-purple-400":"medium"===e.effort?"bg-orange-500/20 text-orange-400":"bg-green-500/20 text-green-400"),children:e.effort}),e.blockedBy&&e.blockedBy.length>0&&(0,r.jsxs)("span",{className:"px-2 py-0.5 rounded bg-panel-dark text-secondary",children:["Depends: ",e.blockedBy.join(", ")]})]})]})]})},e.id))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>A("questions"),className:"flex-1 px-6 py-3 rounded-lg bg-panel-light hover:bg-panel-medium transition-colors text-sm font-medium",children:"Back"}),(0,r.jsxs)("button",{onClick:z,className:"flex-1 px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 transition-colors text-sm font-medium text-primary flex items-center justify-center gap-2",children:[(0,r.jsx)(p.Z,{size:16}),"Build All Deltas"]})]})]}),"building"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Building Deltas"}),(0,r.jsxs)("p",{className:"text-sm text-secondary",children:[w.filter(e=>"complete"===e.status).length,"/",w.length," complete"]})]}),w.some(e=>"in-progress"===e.status)&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-primary mb-2 flex items-center gap-2",children:[(0,r.jsx)(i.Z,{size:14,className:"animate-spin"})," In Progress"]}),(0,r.jsx)("div",{className:"space-y-2",children:w.filter(e=>"in-progress"===e.status).map(e=>(0,r.jsx)("div",{className:"glass-light rounded-lg p-3 border border-primary/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{size:14,className:"animate-spin text-primary"}),(0,r.jsx)("span",{className:"text-xs font-mono text-primary",children:e.id}),(0,r.jsx)("span",{className:"text-sm",children:e.title}),(0,r.jsx)("span",{className:"text-xs text-secondary ml-auto",children:e.assignedTo})]})},e.id))})]}),w.some(e=>"human"===e.deltaType&&"complete"!==e.status)&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-blue-400 mb-2 flex items-center gap-2",children:[(0,r.jsx)(d.Z,{size:14})," Waiting on You"]}),(0,r.jsx)("div",{className:"space-y-2",children:w.filter(e=>"human"===e.deltaType&&"complete"!==e.status).map(e=>(0,r.jsx)("div",{className:"glass-light rounded-lg p-3 border border-blue-500/30",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(d.Z,{size:14,className:"text-blue-400 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-primary",children:e.id}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.title})]}),e.description&&(0,r.jsx)("p",{className:"text-xs text-secondary mt-1",children:e.description})]}),(0,r.jsx)("button",{onClick:()=>q(e.id),className:"px-3 py-1 text-xs rounded bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors",children:"Mark Complete"})]})},e.id))})]}),w.some(e=>"blocked"===e.status)&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:[(0,r.jsx)(c,{size:14})," Blocked"]}),(0,r.jsx)("div",{className:"space-y-2",children:w.filter(e=>"blocked"===e.status).map(e=>{var t;return(0,r.jsx)("div",{className:"glass-light rounded-lg p-3 border border-orange-500/30 opacity-60",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c,{size:14,className:"text-orange-400"}),(0,r.jsx)("span",{className:"text-xs font-mono text-primary",children:e.id}),(0,r.jsx)("span",{className:"text-sm",children:e.title}),(0,r.jsxs)("span",{className:"text-xs text-orange-400 ml-auto",children:["Waiting for: ",null===(t=e.blockedBy)||void 0===t?void 0:t.join(", ")]})]})},e.id)})})]}),w.some(e=>"complete"===e.status)&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-green-400 mb-2 flex items-center gap-2",children:[(0,r.jsx)(l.Z,{size:14})," Complete"]}),(0,r.jsx)("div",{className:"space-y-2",children:w.filter(e=>"complete"===e.status).map(e=>(0,r.jsx)("div",{className:"glass-light rounded-lg p-3 border border-green-500/30",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(l.Z,{size:14,className:"text-green-400 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-primary",children:e.id}),(0,r.jsx)("span",{className:"text-sm",children:e.title})]}),e.output&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-xs text-secondary cursor-pointer hover:text-primary",children:"View output"}),(0,r.jsx)("pre",{className:"mt-2 p-2 bg-panel-dark rounded text-xs overflow-x-auto max-h-40 overflow-y-auto",children:e.output})]})]})]})},e.id))})]}),w.some(e=>"pending"===e.status&&"llm"===e.deltaType)&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-secondary mb-2 flex items-center gap-2",children:[(0,r.jsx)(m,{size:14})," Pending"]}),(0,r.jsx)("div",{className:"space-y-2",children:w.filter(e=>"pending"===e.status&&"llm"===e.deltaType).map(e=>(0,r.jsx)("div",{className:"glass-light rounded-lg p-3 border border-border/30 opacity-60",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m,{size:14,className:"text-secondary"}),(0,r.jsx)("span",{className:"text-xs font-mono text-primary",children:e.id}),(0,r.jsx)("span",{className:"text-sm",children:e.title})]})},e.id))})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>A("deltas"),className:"flex-1 px-6 py-3 rounded-lg bg-panel-light hover:bg-panel-medium transition-colors text-sm font-medium",children:"Back to Deltas"}),w.every(e=>"complete"===e.status)&&(0,r.jsx)("button",{onClick:()=>A("results"),className:"flex-1 px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 transition-colors text-sm font-medium text-primary",children:"View Results"})]})]}),"results"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6 text-center",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"p-4 rounded-full bg-primary/10 border border-primary/20",children:(0,r.jsx)(l.Z,{className:"w-12 h-12 text-primary"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gradient mb-2",children:"R&D Complete"}),(0,r.jsx)("p",{className:"text-secondary",children:"All Deltas have been completed"})]}),(0,r.jsx)("div",{className:"glass-light rounded-lg p-4 mb-6 text-left text-sm",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-secondary",children:"Claims analyzed:"}),(0,r.jsx)("span",{className:"font-medium",children:h.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-secondary",children:"Questions answered:"}),(0,r.jsx)("span",{className:"font-medium",children:Object.keys(N).length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-secondary",children:"Deltas completed:"}),(0,r.jsx)("span",{className:"font-medium text-green-400",children:w.filter(e=>"complete"===e.status).length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-secondary",children:"AI tasks:"}),(0,r.jsx)("span",{className:"font-medium",children:w.filter(e=>"llm"===e.deltaType).length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-secondary",children:"Human tasks:"}),(0,r.jsx)("span",{className:"font-medium",children:w.filter(e=>"human"===e.deltaType).length})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>A("building"),className:"flex-1 px-6 py-3 rounded-lg bg-panel-light hover:bg-panel-medium transition-colors text-sm font-medium",children:"View Build Log"}),(0,r.jsx)("button",{onClick:U,className:"flex-1 px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 transition-colors text-sm font-medium text-primary",children:"Start New Session"})]})]})]})})}},1798:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(7437);function a(e){return(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",...e,children:[(0,r.jsx)("path",{d:"M6.5 6.8h11A3.5 3.5 0 0 1 21 10.3v4.2A3.5 3.5 0 0 1 17.5 18H11l-3.4 2v-2H6.5A3.5 3.5 0 0 1 3 14.5v-4.2A3.5 3.5 0 0 1 6.5 6.8z",stroke:"currentColor",strokeWidth:"1.8",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M8 10.5v3.8M12 9.5v5.8M16 11.2v3.1",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}s(2265)},8243:function(e,t,s){"use strict";s.d(t,{LF:function(){return o},SJ:function(){return d},bG:function(){return a},j9:function(){return c},l1:function(){return l},rf:function(){return n},x$:function(){return i}});let r="http://localhost:8080";async function a(e,t,s,a,n,l){let i=null;try{let o;if(!t){let e="Provider must be specified - no model selected";throw null==n||n(e),Error(e)}try{if(l&&l.length>0){let s=e=>new Promise((t,s)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>{let e=r.result.split(",")[1];t(e)},r.onerror=e=>s(e)}),a=await Promise.all(l.map(async(e,t)=>{let r=await s(e);return{filename:e.name,data:r,contentType:e.type||"application/octet-stream"}}));o=await fetch("".concat(r,"/chat/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:"default",user_id:"user",message:e,provider:t,attachments:a})})}else o=await fetch("".concat(r,"/chat/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:"default",user_id:"user",message:e,provider:t})})}catch(e){throw e}if(!o.ok)throw await o.text(),Error("Submit failed: ".concat(o.status));let{assistant_message_id:c}=await o.json(),d="".concat(r,"/chat/stream/").concat(c);i=new EventSource(d);let m="",u={};return i.onopen=()=>{console.log("[STREAM] ✅ EventSource connected to:",d)},i.onmessage=e=>{console.log("[STREAM] \uD83D\uDCE8 Received SSE event:",e.data);try{var r,l;let o=JSON.parse(e.data);if(console.log("[STREAM] \uD83D\uDCE6 Parsed data:",o),"token"===o.type)console.log("[STREAM] \uD83D\uDD25 Token received:",null===(r=o.content)||void 0===r?void 0:r.substring(0,50)),m+=o.content,null==s||s(o.content);else if("done"===o.type){console.log("[STREAM] ✅ Done event received, fullResponse length:",m.length),u=o.metadata||{};let e=(null===(l=o.result)||void 0===l?void 0:l.response)||o.response||m;if(e&&e!==m&&e.length>m.length){let t=e.substring(m.length);console.log("[STREAM] \uD83D\uDCDD Emitting remaining content:",t.length,"chars"),null==s||s(t),m=e}console.log("[STREAM] \uD83C\uDFC1 Closing stream, final response length:",m.length),null==i||i.close(),null==a||a({status:"completed",result:{response:m,...u},model_used:t,task:u.task||"general",operation:"chat",baby_invoked:u.baby_invoked||!1})}else"error"===o.type?(console.error("[STREAM] ❌ Error event received:",o.error),null==i||i.close(),null==n||n(o.error)):"status"===o.type?console.log("[STREAM] \uD83D\uDCCA Status event:",o.status):console.warn("[STREAM] ⚠️ Unknown event type:",o.type,o)}catch(t){console.error("[STREAM] ❌ Parse error:",t,"Raw data:",e.data),null==n||n("Failed to parse stream data: ".concat(t instanceof Error?t.message:"Unknown error")),null==i||i.close()}},i.onerror=e=>{console.error("[STREAM] ❌ EventSource error:",e),console.error("[STREAM] EventSource readyState:",null==i?void 0:i.readyState),null==i||i.close(),null==n||n("Connection error - stream readyState: ".concat(null==i?void 0:i.readyState))},{messageId:c,cleanup:()=>{i&&(i.close(),i=null)}}}catch(e){throw console.error("[HaleyAPI] Error:",e),i&&i.close(),null==n||n(e instanceof Error?e.message:"Unknown error"),e}}async function n(e,t,s,r,n,l){return await Promise.all(t.map(async t=>{try{let{messageId:i,cleanup:o}=await a(e,t,e=>null==s?void 0:s(t,e),e=>null==r?void 0:r(t,e),e=>null==n?void 0:n(t,e),l);return{provider:t,messageId:i,cleanup:o}}catch(e){return null==n||n(t,e instanceof Error?e.message:"Failed to start stream"),{provider:t,messageId:"",cleanup:()=>{}}}}))}async function l(e,t,s,a,n){let l=null;try{if(!t){let e="Provider must be specified - no model selected";throw null==n||n(e),Error(e)}let i=new FormData;i.append("audio_file",e,"voice_message.webm");let o="".concat(r,"/chat/submit/audio?conversation_id=default&provider=").concat(t),c=await fetch(o,{method:"POST",body:i});if(!c.ok){let e=await c.text();throw Error("Audio submit failed: ".concat(c.status," - ").concat(e))}let{assistant_message_id:d,transcript:m}=await c.json();l=new EventSource("".concat(r,"/chat/stream/").concat(d));let u="",p={};return l.onmessage=e=>{console.log("[AUDIO-STREAM] \uD83D\uDCE8 Received SSE event:",e.data);try{let r=JSON.parse(e.data);console.log("[AUDIO-STREAM] \uD83D\uDCE6 Parsed data:",r),"token"===r.type?(console.log("[AUDIO-STREAM] \uD83D\uDD25 Token received"),u+=r.content,null==s||s(r.content)):"done"===r.type?(console.log("[AUDIO-STREAM] ✅ Done event, length:",u.length),p=r.metadata||{},null==l||l.close(),null==a||a({status:"completed",result:{response:u,...p},model_used:t,task:p.task||"general",operation:"chat",baby_invoked:p.baby_invoked||!1})):"error"===r.type&&(console.error("[AUDIO-STREAM] ❌ Error event:",r.error),null==l||l.close(),null==n||n(r.error))}catch(t){console.error("[AUDIO-STREAM] ❌ Parse error:",t,"Raw data:",e.data),null==n||n("Audio stream parse error: ".concat(t instanceof Error?t.message:"Unknown")),null==l||l.close()}},l.onerror=e=>{console.error("[AUDIO-STREAM] ❌ EventSource error:",e),console.error("[AUDIO-STREAM] readyState:",null==l?void 0:l.readyState),null==l||l.close(),null==n||n("Audio stream connection error - readyState: ".concat(null==l?void 0:l.readyState))},{messageId:d,transcript:m,cleanup:()=>{l&&(l.close(),l=null)}}}catch(e){throw console.error("[HaleyAPI] Audio Error:",e),l&&l.close(),null==n||n(e instanceof Error?e.message:"Unknown error"),e}}async function i(){try{let e=await fetch("".concat(r,"/logic/system/health"));if(!e.ok)throw Error("Status check failed: ".concat(e.status));let t=await e.json();return{os:"Haley OS",kernel_status:{kernel:"Logic Engine",syscalls:t.requests_processed||0,processes:1,modules:t.modules_registered||0,memory_keys:t.state_size||0},baby_pid:1001,note:"Multi-LLM Router Active"}}catch(e){return{os:"Haley OS",kernel_status:{kernel:"Logic Engine",syscalls:0,processes:1,modules:0,memory_keys:0},baby_pid:1001,note:"Multi-LLM Router Active"}}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let s=await fetch("".concat(r,"/chat/conversations/").concat(e,"?limit=").concat(t));if(!s.ok)throw Error("Failed to load conversations: ".concat(s.statusText));return(await s.json()).conversations||[]}catch(e){return console.error("[API] Load conversations failed:",e),[]}}async function c(e,t){try{let s=await fetch("".concat(r,"/chat/conversations/").concat(e,"/").concat(t));if(!s.ok){if(404===s.status)return null;throw Error("Failed to load conversation: ".concat(s.statusText))}return await s.json()}catch(e){return console.error("[API] Load conversation failed:",e),null}}async function d(e,t){try{let s=await fetch("".concat(r,"/chat/conversations/").concat(e,"/").concat(t),{method:"DELETE"});if(!s.ok)throw Error("Failed to delete conversation: ".concat(s.statusText));return await s.json()}catch(e){throw console.error("[API] Delete conversation failed:",e),e}}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6178)}),_N_E=e.O()}]);