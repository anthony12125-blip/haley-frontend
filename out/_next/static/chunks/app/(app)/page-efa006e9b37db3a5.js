(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{1542:function(e,t,a){Promise.resolve().then(a.bind(a,724))},724:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eu},dynamic:function(){return ep}});var r=a(7437),s=a(2265),o=a(6617),n=a(6463),i=a(8243),l=a(9114);class d{static normalizeText(e){let t=e;return this.FILLER_PATTERNS.forEach(e=>{t=t.replace(e,"")}),this.PLATFORM_PATTERNS.forEach(e=>{t=t.replace(e,"[AI]")}),t=t.trim().replace(/\s+/g," ")}static extractCodeBlocks(e){return e.match(/```[\s\S]*?```/g)||[]}static extractInstructions(e){let t=[],a=e.split("\n"),r=[/^(create|add|remove|update|modify|delete|implement|fix|change|replace|configure)\s+/i,/^(ensure|make sure|verify|check|validate)\s+/i,/^(install|run|execute|build|deploy|test)\s+/i];return a.forEach(e=>{let a=e.trim();r.some(e=>e.test(a))&&a.length>10&&t.push(this.normalizeText(a))}),t}static extractOutputs(e){let t=[],a=e.split("\n"),r=[/^(created|added|removed|updated|modified|deleted|implemented|fixed|changed|replaced|configured)\s+/i,/^(installed|ran|executed|built|deployed|tested)\s+/i,/✅|✓|completed|done|finished/i];return a.forEach(e=>{let a=e.trim();r.some(e=>e.test(a))&&a.length>10&&t.push(this.normalizeText(a))}),t}static extractConstraints(e){let t=[],a=e.split("\n"),r=[/^(must|should|cannot|do not|never|always)\s+/i,/^(required|optional|mandatory|forbidden)\s*:/i,/^(constraint|limitation|requirement|rule)\s*:/i];return a.forEach(e=>{let a=e.trim();r.some(e=>e.test(a))&&a.length>10&&t.push(this.normalizeText(a))}),t}static inferPurpose(e,t){let a=this.normalizeText(e).split(/[.!?]/)[0];return"message"===t?a.substring(0,150)||"Response migration":"Conversation migration"}static migrateSingleMessage(e){let t=e.content,a=this.extractCodeBlocks(t),r=this.extractInstructions(t),s=this.extractOutputs(t),o=this.extractConstraints(t),n=this.inferPurpose(t,"message");return{version:"1.1",type:"ai_chat_migration_summary",generated_at:new Date().toISOString(),scope:"single_message",summary:{purpose:n,instructions:r,outputs:s,data_blocks:a,constraints:o},meta:{normalized:!0,ai_agnostic:!0,source_scope:"message",safe_for:["Claude","GPT","Gemini","Other LLMs"]}}}static migrateFullChat(e){let t=e.map(e=>e.content).join("\n\n"),a=this.extractCodeBlocks(t),r=this.extractInstructions(t),s=this.extractOutputs(t),o=this.extractConstraints(t),n=this.inferPurpose(t,"chat"),i=Array.from(new Set(r)),l=Array.from(new Set(s)),d=Array.from(new Set(o));return{version:"1.1",type:"ai_chat_migration_summary",generated_at:new Date().toISOString(),scope:"full_chat",summary:{purpose:n,instructions:i,outputs:l,data_blocks:a,constraints:d},meta:{normalized:!0,ai_agnostic:!0,source_scope:"chat",safe_for:["Claude","GPT","Gemini","Other LLMs"]}}}static async copyToClipboard(e){try{let t=JSON.stringify(e,null,2);return await navigator.clipboard.writeText(t),!0}catch(e){return console.error("Failed to copy to clipboard:",e),!1}}}d.FILLER_PATTERNS=[/^(sure|okay|alright|got it|understood|absolutely|of course)[,!.]?\s*/gi,/^(hello|hi|hey|greetings)[,!.]?\s*/gi,/^(i'll|i will|let me|i'm going to)\s+/gi,/\s+(for you|to help|happy to|glad to)\s*/gi],d.PLATFORM_PATTERNS=[/claude|gpt|gemini|chatgpt|openai|anthropic|google/gi,/as an ai|as a language model|i'm an ai/gi,/in this conversation|in this chat/gi];var c=a(2453),m=a(611),x=a(2873),b=e=>{let{size:t=20,className:a="",strokeWidth:s=1.5}=e;return(0,r.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[(0,r.jsx)("rect",{x:"6",y:"8",width:"12",height:"9",rx:"1"}),(0,r.jsx)("path",{d:"M 6 8 L 12 13 L 18 8"}),(0,r.jsx)("path",{d:"M 6 10 Q 2 9 1 12 Q 2 11 6 12",fill:"currentColor",opacity:"0.3"}),(0,r.jsx)("path",{d:"M 18 10 Q 22 9 23 12 Q 22 11 18 12",fill:"currentColor",opacity:"0.3"})]})};function f(e){let{aiMode:t,activeModels:a,activeModel:s,onToggleResearch:o,onToggleSidebar:n,onOpenMagicWindow:i,systemStatus:l,researchEnabled:d,logicEngineEnabled:c,onToggleLogicEngine:m,onMigrateChat:f}=e;return(0,r.jsx)("header",{className:"glass-strong border-b border-border safe-top ".concat("gemini"===s?"hue-teal":"claude"===s?"hue-orange":"gpt"===s?"hue-blue":"perplexity"===s?"hue-purple":"llama"===s?"hue-gold":"grok"===s?"hue-red":"supreme-court"===t?"hue-purple":""),children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsx)("button",{onClick:n,className:"icon-btn md:hidden",title:"Toggle sidebar",children:(0,r.jsx)(x.Z,{size:24})}),(0,r.jsx)("div",{className:"hidden md:block w-10"}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gradient",children:s&&({gemini:"Gemini",gpt:"GPT",claude:"Claude",llama:"Meta",perplexity:"Perplexity",mistral:"Mistral",grok:"Grok"})[s]||"Haley"}),(0,r.jsxs)("span",{className:"text-xs font-mono text-muted opacity-60",children:["#","82".padStart(4,"0")]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:f&&(0,r.jsx)("button",{onClick:f,className:"p-2 rounded-lg hover:bg-panel-light active:bg-primary/20 transition-all",title:"Migrate entire chat","aria-label":"Generate AI-agnostic summary for entire chat",children:(0,r.jsx)(b,{size:38})})})]})})}var p=a(8059),u=a.n(p),g=a(8604),h=a(2023),y=a(2222),v=a(5891),w=a(8954),j=a(4504),k=a(9827),z=a(5636),N=a(3722),S=a(9590),E=a(4328),C=a(4109),M=a(8733);function A(e){let{messageId:t,content:a,audioUrl:o,onAudioReady:n,onError:i}=e,[l,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(o),x=async()=>{console.log("[SPEAKER] \uD83C\uDFAF handleSpeak CALLED - Speaker button clicked!"),console.log("[SPEAKER] \uD83D\uDCDD Content to synthesize:",a.substring(0,100)+"..."),d(!0);try{let e=c;if(!e){let t="cgSgspJ2msm6clMCkdW9",r={module:"ttsadapter",action:"synthesize",params:{text:a,voice_id:t}};console.log("[SPEAKER] \uD83C\uDFA4 Requesting synthesis from Module Matrix..."),console.log("[SPEAKER] \uD83D\uDCE4 Request payload:",JSON.stringify(r,null,2)),console.log("[SPEAKER] \uD83D\uDD0A Using Voice ID:",t);let s=await fetch("https://module-matrix-409495160162.us-central1.run.app/matrix/execute_module",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log("[SPEAKER] \uD83D\uDCE5 ElevenLabs API Response Status:",s.status,s.statusText),console.log("[SPEAKER] \uD83D\uDCE5 Response Headers:",Object.fromEntries(s.headers.entries())),!s.ok){let e=await s.text();console.error("[SPEAKER] ❌ Error response body:",e);let t="Module Matrix returned ".concat(s.status,": ").concat(s.statusText);throw null==i||i(t),Error(t)}let o=await s.json();if(console.log("[SPEAKER] \uD83D\uDCE6 Full Response data:",JSON.stringify(o,null,2)),o.result&&o.result.error){let e="TTS Error: ".concat(o.result.error);throw console.error("[SPEAKER] ❌ Module returned error:",o.result.error),null==i||i(e),Error(e)}if(!o.result||!o.result.audio_url)throw console.error("[SPEAKER] ❌ Invalid response structure:",o),Error("No audio URL in response");e=o.result.audio_url,m(e),console.log("[SPEAKER] ✅ Got audio URL:",e)}if(e){console.log("[SPEAKER] \uD83C\uDFB5 Playing audio directly with new Audio().play()"),console.log("[SPEAKER] \uD83C\uDFB5 Audio URL:",e);let t=new Audio(e);t.addEventListener("loadeddata",()=>{console.log("[SPEAKER] ✅ Audio loaded successfully, duration:",t.duration,"seconds")}),t.addEventListener("playing",()=>{console.log("[SPEAKER] ▶️ Audio playback started")}),t.addEventListener("ended",()=>{console.log("[SPEAKER] ⏹️ Audio playback completed")}),t.addEventListener("error",e=>{console.error("[SPEAKER] ❌ Audio playback error:",e),null==i||i("Audio playback failed")}),await t.play(),console.log("[SPEAKER] ✅ audio.play() called successfully"),null==n||n(e,a)}else throw console.error("[SPEAKER] ❌ No URL available for playback"),Error("Audio URL is undefined")}catch(e){console.error("[SPEAKER] ❌ Fatal error:",e),null==i||i(e instanceof Error?e.message:"Unknown error")}finally{d(!1),console.log("[SPEAKER] \uD83C\uDFC1 handleSpeak complete, loading state reset")}};return(0,r.jsx)("button",{onClick:x,disabled:l,className:"p-2 bg-gray-800 rounded-full shadow-lg border border-gray-700 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Play audio",children:l?(0,r.jsx)(C.Z,{className:"animate-spin h-5 w-5"}):(0,r.jsx)(M.Z,{className:"h-5 w-5"})})}function R(e){var t,a,o,n;let{message:i,onReadAloud:l,onShare:m,onRetry:x,onBranch:f,isStreaming:p=!1,isLastAssistantMessage:C=!1,onAudioReady:M,onVoiceError:R}=e,[T,D]=(0,s.useState)(!1),[_,P]=(0,s.useState)(""),[I,F]=(0,s.useState)(!p),L=(0,s.useRef)(i.content),Z=(0,s.useRef)(0),{setPayload:U}=(0,c.T)();if((0,s.useEffect)(()=>{if(!p||"user"===i.role){P(i.content),F(!0);return}L.current!==i.content&&(L.current=i.content,Z.current=0,P(""),F(!1));let e=setInterval(()=>{if(Z.current<i.content.length){let e=Math.min(Math.floor(3*Math.random())+2,i.content.length-Z.current);Z.current+=e,P(i.content.slice(0,Z.current))}else F(!0),clearInterval(e)},15);return()=>clearInterval(e)},[i.content,p,i.role]),p&&"assistant"===i.role&&!_)return null;let O=async()=>{try{let e=d.migrateSingleMessage(i);U(e),await d.copyToClipboard(e),D(!0),setTimeout(()=>D(!1),2e3)}catch(e){console.error("Failed to migrate message:",e)}},B=e=>{var t;let a=(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(a)?g.Z:["pdf","doc","docx","txt","rtf"].includes(a)?h.Z:["xls","xlsx","csv"].includes(a)?y.Z:["zip","rar","7z","tar","gz"].includes(a)?v.Z:["mp4","mov","avi","mkv","webm"].includes(a)?w.Z:["mp3","wav","m4a","ogg","flac"].includes(a)?j.Z:k.Z},G=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):"".concat((e/1048576).toFixed(1)," MB"),K="user"===i.role&&(null===(t=i.metadata)||void 0===t?void 0:t.isVoiceMessage);return(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 "+"message-container ".concat("user"===i.role?"user-message":""," ").concat(K?"voice-message":""),children:[(0,r.jsx)(u(),{id:"e2ea97a2b51b4b54",children:".message-container.jsx-e2ea97a2b51b4b54{padding:32px 0;position:relative;-webkit-animation:messageAppear.3s ease-out forwards;-moz-animation:messageAppear.3s ease-out forwards;-o-animation:messageAppear.3s ease-out forwards;animation:messageAppear.3s ease-out forwards}.message-container.user-message.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}@-webkit-keyframes messageAppear{from{opacity:0;-webkit-transform:translatey(4px);transform:translatey(4px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes messageAppear{from{opacity:0;-moz-transform:translatey(4px);transform:translatey(4px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes messageAppear{from{opacity:0;-o-transform:translatey(4px);transform:translatey(4px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes messageAppear{from{opacity:0;-webkit-transform:translatey(4px);-moz-transform:translatey(4px);-o-transform:translatey(4px);transform:translatey(4px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.message-content-wrapper.jsx-e2ea97a2b51b4b54{max-width:48rem;margin:0 auto;padding:0 2rem}.user-message.jsx-e2ea97a2b51b4b54 .message-content-wrapper.jsx-e2ea97a2b51b4b54{max-width:80%;margin:0 2rem 0 0;padding:0}.message-header.jsx-e2ea97a2b51b4b54{font-size:14px;font-weight:600;margin-bottom:16px;color:var(--text-secondary);letter-spacing:.01em}.jsx-e2ea97a2b51b4b54:root.light .message-header.jsx-e2ea97a2b51b4b54{color:#6A6A6A}.message-header.haley-header.jsx-e2ea97a2b51b4b54{color:var(--accent)}.jsx-e2ea97a2b51b4b54:root.light .message-header.haley-header.jsx-e2ea97a2b51b4b54{color:#4B6CFF}.user-message.jsx-e2ea97a2b51b4b54 .message-header.jsx-e2ea97a2b51b4b54{text-align:right}.message-text.jsx-e2ea97a2b51b4b54{font-size:16px;line-height:1.7;color:var(--text-primary);white-space:pre-wrap;word-wrap:break-word;will-change:contents;contain:layout style}.user-message.jsx-e2ea97a2b51b4b54 .message-text.jsx-e2ea97a2b51b4b54{background:#404040;padding:12px 16px;-webkit-border-radius:18px;-moz-border-radius:18px;border-radius:18px;color:#fff;display:inline-block;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.voice-message.jsx-e2ea97a2b51b4b54 .message-text.jsx-e2ea97a2b51b4b54{background:-webkit-linear-gradient(315deg,#4B6CFF 0%,#6B8AFF 100%);background:-moz-linear-gradient(315deg,#4B6CFF 0%,#6B8AFF 100%);background:-o-linear-gradient(315deg,#4B6CFF 0%,#6B8AFF 100%);background:linear-gradient(135deg,#4B6CFF 0%,#6B8AFF 100%);font-style:italic;position:relative;padding-left:40px}.jsx-e2ea97a2b51b4b54:root.light .voice-message.jsx-e2ea97a2b51b4b54 .message-text.jsx-e2ea97a2b51b4b54{background:-webkit-linear-gradient(315deg,#EEF2FF 0%,#E0E7FF 100%);background:-moz-linear-gradient(315deg,#EEF2FF 0%,#E0E7FF 100%);background:-o-linear-gradient(315deg,#EEF2FF 0%,#E0E7FF 100%);background:linear-gradient(135deg,#EEF2FF 0%,#E0E7FF 100%);color:#1a1a1a;border:1px solid rgba(75,108,255,.3)}.voice-icon.jsx-e2ea97a2b51b4b54{position:absolute;left:12px;top:50%;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%);font-size:18px;opacity:.9}.jsx-e2ea97a2b51b4b54:root.light .user-message.jsx-e2ea97a2b51b4b54 .message-text.jsx-e2ea97a2b51b4b54{background:#fff;color:#1a1a1a;border:1px solid rgba(0,0,0,.1)}.jsx-e2ea97a2b51b4b54:root.light .message-text.jsx-e2ea97a2b51b4b54{color:#1a1a1a}.cursor-blink.jsx-e2ea97a2b51b4b54{display:inline-block;width:2px;height:1.2em;background-color:var(--text-primary);margin-left:2px;vertical-align:text-bottom;-webkit-animation:blink 1s step-end infinite;-moz-animation:blink 1s step-end infinite;-o-animation:blink 1s step-end infinite;animation:blink 1s step-end infinite}.jsx-e2ea97a2b51b4b54:root.light .cursor-blink.jsx-e2ea97a2b51b4b54{background-color:#1a1a1a}@-webkit-keyframes blink{0%,100%{opacity:1}50%{opacity:0}}@-moz-keyframes blink{0%,100%{opacity:1}50%{opacity:0}}@-o-keyframes blink{0%,100%{opacity:1}50%{opacity:0}}@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}.action-buttons.jsx-e2ea97a2b51b4b54{margin-top:12px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;opacity:1;-webkit-transition:opacity.2s ease;-moz-transition:opacity.2s ease;-o-transition:opacity.2s ease;transition:opacity.2s ease;min-height:48px}.user-message.jsx-e2ea97a2b51b4b54 .action-buttons.jsx-e2ea97a2b51b4b54{-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end;min-height:28px}.action-buttons.streaming.jsx-e2ea97a2b51b4b54{opacity:0;pointer-events:none}.icon-row.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:4px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.action-column.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.haley-symbol-wrapper.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:48px;height:48px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;background:transparent;border:none;color:var(--accent);-webkit-transition:all.15s ease;-moz-transition:all.15s ease;-o-transition:all.15s ease;transition:all.15s ease;cursor:pointer}.jsx-e2ea97a2b51b4b54:root.light .haley-symbol-wrapper.jsx-e2ea97a2b51b4b54{color:#4B6CFF}.haley-symbol-wrapper.jsx-e2ea97a2b51b4b54:hover{background:var(--panel-medium)}.jsx-e2ea97a2b51b4b54:root.light .haley-symbol-wrapper.jsx-e2ea97a2b51b4b54:hover{background:rgba(0,0,0,.04)}.action-btn.jsx-e2ea97a2b51b4b54{padding:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;background:transparent;border:none;color:var(--text-secondary);font-size:13px;cursor:pointer;-webkit-transition:all.15s ease;-moz-transition:all.15s ease;-o-transition:all.15s ease;transition:all.15s ease;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:28px;height:28px}.jsx-e2ea97a2b51b4b54:root.light .action-btn.jsx-e2ea97a2b51b4b54{color:#6A6A6A}.action-btn.jsx-e2ea97a2b51b4b54:hover{background:var(--panel-medium);color:var(--text-primary)}.jsx-e2ea97a2b51b4b54:root.light .action-btn.jsx-e2ea97a2b51b4b54:hover{background:rgba(0,0,0,.04);color:#000}.metadata-section.jsx-e2ea97a2b51b4b54{margin-top:16px;padding-top:12px;border-top:1px solid var(--border);font-size:12px;color:var(--text-secondary)}.attachments-container.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:12px;margin-top:12px}.attachment-card.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-width:180px;max-width:180px;height:80px;background:var(--panel-dark);border:1px solid var(--border);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:12px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.attachment-card.jsx-e2ea97a2b51b4b54:hover{border-color:var(--primary)}.attachment-header.jsx-e2ea97a2b51b4b54{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:8px;margin-bottom:8px}.attachment-icon.jsx-e2ea97a2b51b4b54{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--accent)}.attachment-name.jsx-e2ea97a2b51b4b54{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;font-size:13px;font-weight:500;color:var(--text-primary);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;line-height:1.3}.attachment-size.jsx-e2ea97a2b51b4b54{font-size:11px;color:var(--text-secondary);margin-top:auto}.jsx-e2ea97a2b51b4b54:root.light .metadata-section.jsx-e2ea97a2b51b4b54{border-top:1px solid rgba(0,0,0,.1);color:#6A6A6A}.supreme-indicator-wrapper.jsx-e2ea97a2b51b4b54{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.jsx-e2ea97a2b51b4b54:root.light .supreme-indicator-wrapper.jsx-e2ea97a2b51b4b54{border-bottom:1px solid rgba(0,0,0,.1)}.supreme-badge.jsx-e2ea97a2b51b4b54{background:var(--accent);color:white;padding:4px 10px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:10px;font-weight:600;letter-spacing:.5px}.jsx-e2ea97a2b51b4b54:root.light .supreme-badge.jsx-e2ea97a2b51b4b54{background:#4B6CFF}"}),(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 message-content-wrapper",children:[(0,r.jsx)("div",{className:"jsx-e2ea97a2b51b4b54 "+"message-header ".concat("assistant"===i.role?"haley-header":""),children:"user"===i.role?"You":"assistant"===i.role?"Haley":"System"}),(null===(a=i.metadata)||void 0===a?void 0:a.supreme_court)&&(null===(o=i.metadata)||void 0===o?void 0:o.llm_sources)&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 supreme-indicator-wrapper",children:[(0,r.jsx)("div",{className:"jsx-e2ea97a2b51b4b54 supreme-badge",children:"SUPREME COURT"}),(0,r.jsx)("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},className:"jsx-e2ea97a2b51b4b54",children:i.metadata.llm_sources.join(", ")})]}),(0,r.jsxs)("div",{style:{position:"relative"},className:"jsx-e2ea97a2b51b4b54 message-text",children:[K&&(0,r.jsx)("span",{className:"jsx-e2ea97a2b51b4b54 voice-icon",children:"\uD83C\uDFA4"}),_,!I&&"assistant"===i.role&&(0,r.jsx)("span",{className:"jsx-e2ea97a2b51b4b54 cursor-blink"}),"assistant"===i.role&&(0,r.jsx)("div",{style:{position:"absolute",right:"8px",top:"8px"},className:"jsx-e2ea97a2b51b4b54",children:(0,r.jsx)(A,{messageId:i.id,content:i.content,audioUrl:null===(n=i.metadata)||void 0===n?void 0:n.audio_url,onAudioReady:M,onError:R})})]}),i.attachments&&i.attachments.length>0&&(0,r.jsx)("div",{className:"jsx-e2ea97a2b51b4b54 attachments-container",children:i.attachments.map((e,t)=>{let a=B(e);return(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 attachment-card",children:[(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 attachment-header",children:[(0,r.jsx)(a,{size:18,className:"jsx-e2ea97a2b51b4b54 attachment-icon"}),(0,r.jsx)("div",{title:e.name,className:"jsx-e2ea97a2b51b4b54 attachment-name",children:e.name})]}),(0,r.jsx)("div",{className:"jsx-e2ea97a2b51b4b54 attachment-size",children:G(e.size)})]},"".concat(e.name,"-").concat(t))})}),i.metadata&&I&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 metadata-section",children:[i.metadata.model_used&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54",children:["Model: ",i.metadata.model_used]}),void 0!==i.metadata.confidence&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54",children:["Confidence: ",(100*i.metadata.confidence).toFixed(0),"%"]})]}),"system"!==i.role&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 "+"action-buttons ".concat(I?"":"streaming"),children:["assistant"===i.role&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 action-column",children:[(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 icon-row",children:[(0,r.jsx)("button",{onClick:O,title:T?"Migrated!":"Migrate this response","aria-label":"Generate AI-agnostic summary for this message",className:"jsx-e2ea97a2b51b4b54 action-btn",children:(0,r.jsx)(b,{size:32})}),(0,r.jsx)("button",{title:"Good response",className:"jsx-e2ea97a2b51b4b54 action-btn",children:(0,r.jsx)(z.Z,{size:16})}),(0,r.jsx)("button",{title:"Bad response",className:"jsx-e2ea97a2b51b4b54 action-btn",children:(0,r.jsx)(N.Z,{size:16})}),x&&(0,r.jsx)("button",{onClick:x,title:"Retry",className:"jsx-e2ea97a2b51b4b54 action-btn",children:(0,r.jsx)(S.Z,{size:16})})]}),C&&(0,r.jsx)("div",{title:"Haley AI",className:"jsx-e2ea97a2b51b4b54 haley-symbol-wrapper",children:(0,r.jsx)(E.i,{size:48})})]}),"user"===i.role&&(0,r.jsxs)("div",{className:"jsx-e2ea97a2b51b4b54 icon-row",children:[(0,r.jsx)("button",{onClick:O,title:T?"Migrated!":"Migrate this message","aria-label":"Generate AI-agnostic summary for this message",className:"jsx-e2ea97a2b51b4b54 action-btn",children:(0,r.jsx)(b,{size:32})}),x&&(0,r.jsx)("button",{onClick:x,title:"Retry message",className:"jsx-e2ea97a2b51b4b54 action-btn",children:(0,r.jsx)(S.Z,{size:16})})]})]})]})]})}var T=a(1790),D=a(947);function _(e){let{mode:t="thinking"}=e,{currentPack:a}=(0,T.K)(),[o,n]=(0,s.useState)(""),[i,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{if("thinking"===t){n((0,D.qK)(a.thinking_words));let e=setInterval(()=>{n((0,D.qK)(a.thinking_words))},3e3);return()=>clearInterval(e)}},[t,a]),(0,s.useEffect)(()=>{if("generating"===t){if(i)n(i);else{let e=(0,D.qK)(a.generating_words);l(e),n(e)}}else l(null)},[t,a,i]),(0,s.useEffect)(()=>{"static"===t&&n("")},[t]);let d="static"!==t&&o;return(0,r.jsxs)("div",{className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" haley-thinking-wrapper",children:[(0,r.jsx)(u(),{id:"f9fbcfb7edbdd5f0",dynamic:[64,64],children:".haley-thinking-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:12px}.haley-thinking-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;color:var(--accent);width:".concat(64,"px;height:").concat(64,"px;position:relative;overflow:visible}.__jsx-style-dynamic-selector:root.light .haley-thinking-container.__jsx-style-dynamic-selector{color:#4B6CFF}.haley-svg-wrapper.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;width:100%;height:100%;overflow:visible}.vibe-word.__jsx-style-dynamic-selector{font-size:14px;color:var(--text-secondary);font-weight:500;letter-spacing:.02em;-webkit-animation:wordFadeIn.3s ease-out;-moz-animation:wordFadeIn.3s ease-out;-o-animation:wordFadeIn.3s ease-out;animation:wordFadeIn.3s ease-out;min-height:20px}.__jsx-style-dynamic-selector:root.light .vibe-word.__jsx-style-dynamic-selector{color:#6A6A6A}@-webkit-keyframes wordFadeIn{from{opacity:0;-webkit-transform:translatey(-4px);transform:translatey(-4px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes wordFadeIn{from{opacity:0;-moz-transform:translatey(-4px);transform:translatey(-4px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes wordFadeIn{from{opacity:0;-o-transform:translatey(-4px);transform:translatey(-4px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes wordFadeIn{from{opacity:0;-webkit-transform:translatey(-4px);-moz-transform:translatey(-4px);-o-transform:translatey(-4px);transform:translatey(-4px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.segments-group.__jsx-style-dynamic-selector{-webkit-transform-origin:12px 12px;-moz-transform-origin:12px 12px;-ms-transform-origin:12px 12px;-o-transform-origin:12px 12px;transform-origin:12px 12px}.segments-group.mode-thinking.__jsx-style-dynamic-selector{-webkit-animation:segmentsRotateThinking 4s ease-in-out infinite;-moz-animation:segmentsRotateThinking 4s ease-in-out infinite;-o-animation:segmentsRotateThinking 4s ease-in-out infinite;animation:segmentsRotateThinking 4s ease-in-out infinite}.segments-group.mode-thinking.__jsx-style-dynamic-selector .segment.__jsx-style-dynamic-selector{-webkit-animation:segmentMoveThinking 4s ease-in-out infinite;-moz-animation:segmentMoveThinking 4s ease-in-out infinite;-o-animation:segmentMoveThinking 4s ease-in-out infinite;animation:segmentMoveThinking 4s ease-in-out infinite}.segments-group.mode-generating.__jsx-style-dynamic-selector{-webkit-animation:segmentsRotateGenerating 2s linear infinite;-moz-animation:segmentsRotateGenerating 2s linear infinite;-o-animation:segmentsRotateGenerating 2s linear infinite;animation:segmentsRotateGenerating 2s linear infinite}.segments-group.mode-generating.__jsx-style-dynamic-selector .segment.__jsx-style-dynamic-selector{-webkit-animation:none;-moz-animation:none;-o-animation:none;animation:none}.segments-group.mode-static.__jsx-style-dynamic-selector{-webkit-animation:none;-moz-animation:none;-o-animation:none;animation:none}.segments-group.mode-static.__jsx-style-dynamic-selector .segment.__jsx-style-dynamic-selector{-webkit-animation:none;-moz-animation:none;-o-animation:none;animation:none}.center-core.__jsx-style-dynamic-selector{}@-webkit-keyframes segmentsRotateThinking{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}25%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}37.5%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}62.5%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}75%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}87.5%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@-moz-keyframes segmentsRotateThinking{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}25%{-moz-transform:rotate(0deg);transform:rotate(0deg)}37.5%{-moz-transform:rotate(90deg);transform:rotate(90deg)}50%{-moz-transform:rotate(90deg);transform:rotate(90deg)}62.5%{-moz-transform:rotate(90deg);transform:rotate(90deg)}75%{-moz-transform:rotate(180deg);transform:rotate(180deg)}87.5%{-moz-transform:rotate(180deg);transform:rotate(180deg)}100%{-moz-transform:rotate(180deg);transform:rotate(180deg)}}@-o-keyframes segmentsRotateThinking{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}25%{-o-transform:rotate(0deg);transform:rotate(0deg)}37.5%{-o-transform:rotate(90deg);transform:rotate(90deg)}50%{-o-transform:rotate(90deg);transform:rotate(90deg)}62.5%{-o-transform:rotate(90deg);transform:rotate(90deg)}75%{-o-transform:rotate(180deg);transform:rotate(180deg)}87.5%{-o-transform:rotate(180deg);transform:rotate(180deg)}100%{-o-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes segmentsRotateThinking{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}25%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}37.5%{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}62.5%{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}75%{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}87.5%{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}}@-webkit-keyframes segmentMoveThinking{0%,100%{-webkit-transform:translate(0,0);transform:translate(0,0)}12.5%,37.5%{-webkit-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}50%{-webkit-transform:translate(0,0);transform:translate(0,0)}62.5%,87.5%{-webkit-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}}@-moz-keyframes segmentMoveThinking{0%,100%{-moz-transform:translate(0,0);transform:translate(0,0)}12.5%,37.5%{-moz-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}50%{-moz-transform:translate(0,0);transform:translate(0,0)}62.5%,87.5%{-moz-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}}@-o-keyframes segmentMoveThinking{0%,100%{-o-transform:translate(0,0);transform:translate(0,0)}12.5%,37.5%{-o-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}50%{-o-transform:translate(0,0);transform:translate(0,0)}62.5%,87.5%{-o-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}}@keyframes segmentMoveThinking{0%,100%{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);-o-transform:translate(0,0);transform:translate(0,0)}12.5%,37.5%{-webkit-transform:translate(var(--tx),var(--ty));-moz-transform:translate(var(--tx),var(--ty));-o-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}50%{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);-o-transform:translate(0,0);transform:translate(0,0)}62.5%,87.5%{-webkit-transform:translate(var(--tx),var(--ty));-moz-transform:translate(var(--tx),var(--ty));-o-transform:translate(var(--tx),var(--ty));transform:translate(var(--tx),var(--ty))}}@-webkit-keyframes segmentsRotateGenerating{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes segmentsRotateGenerating{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes segmentsRotateGenerating{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes segmentsRotateGenerating{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}")}),(0,r.jsx)("div",{className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" haley-thinking-container",children:(0,r.jsx)("div",{className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" haley-svg-wrapper",children:(0,r.jsxs)("svg",{width:64,height:64,viewBox:"-2 -2 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]]),children:[(0,r.jsx)("g",{className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" "+"segments-group mode-".concat(t),children:Array.from({length:7}).map((e,t)=>{let a=360*t/7,s=(a-20)*Math.PI/180,o=(a+20)*Math.PI/180,n=12+6*Math.cos(s),i=12+6*Math.sin(s),l=12+10*Math.cos(s),d=12+10*Math.sin(s),c=12+10*Math.cos(o),m=12+10*Math.sin(o),x=12+6*Math.cos(o),b=12+6*Math.sin(o),f=a*Math.PI/180;return(0,r.jsx)("path",{d:"M ".concat(n," ").concat(i," L ").concat(l," ").concat(d," A ").concat(10," ").concat(10," 0 0 1 ").concat(c," ").concat(m," L ").concat(x," ").concat(b," A ").concat(6," ").concat(6," 0 0 0 ").concat(n," ").concat(i," Z"),fill:"currentColor",opacity:.7,style:{"--tx":"".concat(4*Math.cos(f),"px"),"--ty":"".concat(4*Math.sin(f),"px")},className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" segment"},t)})}),(0,r.jsxs)("g",{className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" center-core",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor",opacity:"0.9",className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"2.5",fill:"none",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.4",className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor",opacity:"1",className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])})]})]})})}),d&&(0,r.jsx)("div",{className:u().dynamic([["f9fbcfb7edbdd5f0",[64,64]]])+" vibe-word",children:o},o)]})}var P=a(9491);function I(e){var t;let{messages:a,isLoading:o,onRetryMessage:n,onBranchMessage:i,onStreamingComplete:l,onRetryProvider:d,onAudioReady:c,onVoiceError:m,onMultiLLMSummary:x}=e,b=(0,s.useRef)(null),f=(0,s.useRef)(null),[p,g]=(0,s.useState)(null),h=(0,s.useRef)(0),[y,v]=(0,s.useState)(!1);(0,s.useRef)(null);let w=(0,s.useMemo)(()=>{for(let e=a.length-1;e>=0;e--)if("assistant"===a[e].role)return a[e].id;return null},[a]),j=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!f.current||!e&&y)return;let t=f.current,a=t.scrollHeight-t.clientHeight;t.scrollTop=a},[y]),k=(0,s.useCallback)(()=>{if(!f.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:a}=f.current;v(t-a-e>150)},[]);(0,s.useEffect)(()=>{j()},[a,j]),(0,s.useEffect)(()=>{j()},[o,j]),(0,s.useEffect)(()=>{if(a.length>h.current){let e=a[a.length-1];"assistant"===e.role&&(console.log("\uD83C\uDFAC STREAMING STARTED - New assistant message detected"),console.log("   isLoading:",o),console.log("   streamingMessageId:",e.id),g(e.id),j(!0))}h.current=a.length},[a,j,o,l]),(0,s.useEffect)(()=>{if(p){var e;let t=a.find(e=>e.id===p);t&&(null===(e=t.metadata)||void 0===e?void 0:e.streaming)===!1&&(console.log("✅ STREAMING COMPLETE - metadata.streaming set to false"),g(null),null==l||l())}},[a,p,l]),(0,s.useEffect)(()=>{if(p&&!y){let e;let t=()=>{if(f.current){let{scrollHeight:e,clientHeight:t,scrollTop:a}=f.current;e-t-a<100&&(f.current.scrollTop=e-t)}e=requestAnimationFrame(t)};return e=requestAnimationFrame(t),()=>cancelAnimationFrame(e)}},[p,y]);let z=async e=>{if(navigator.share)try{await navigator.share({text:e.content,title:"Haley OS Message"})}catch(e){console.log("Share cancelled")}else await navigator.clipboard.writeText(e.content),alert("Message copied to clipboard!")};(0,s.useEffect)(()=>{a.length>0&&"user"===a[a.length-1].role&&(v(!1),j(!0))},[a,j]),console.log("\uD83D\uDD0D ChatMessages Render:",{isLoading:o,streamingMessageId:p,messageCount:a.length,lastMessageRole:null===(t=a[a.length-1])||void 0===t?void 0:t.role});let N=p?"generating":"thinking";return(0,r.jsxs)("div",{ref:f,onScroll:k,style:{scrollbarWidth:"thin",scrollbarColor:"var(--border) transparent",scrollBehavior:"auto"},className:"jsx-e7a949443a9f8cb0 flex-1 overflow-y-auto",children:[(0,r.jsx)(u(),{id:"e7a949443a9f8cb0",children:".messages-container.jsx-e7a949443a9f8cb0{width:100%;padding-bottom:120px;min-height:100%}.loading-container.jsx-e7a949443a9f8cb0{padding:32px 0;position:relative;margin-bottom:20px}.loading-content.jsx-e7a949443a9f8cb0{max-width:48rem;margin:0 auto;padding:0 2rem}.loading-header.jsx-e7a949443a9f8cb0{font-size:14px;font-weight:600;margin-bottom:16px;color:var(--accent);letter-spacing:.01em}.jsx-e7a949443a9f8cb0:root.light .loading-header.jsx-e7a949443a9f8cb0{color:#4B6CFF}"}),(0,r.jsxs)("div",{className:"jsx-e7a949443a9f8cb0 messages-container",children:[a.map(e=>{var t;if(null===(t=e.metadata)||void 0===t?void 0:t.isMultiLLM){console.log("[ChatMessages] Multi-LLM message - showing in Artifacts Panel");let t=e.metadata.providers||[],a=e.metadata.completedProviders||[],s=e.metadata.allProvidersComplete||!1;return(0,r.jsx)("div",{className:"jsx-e7a949443a9f8cb0 mb-4",children:(0,r.jsx)("div",{className:"jsx-e7a949443a9f8cb0 max-w-3xl mx-auto px-4",children:(0,r.jsx)("div",{className:"jsx-e7a949443a9f8cb0 text-sm text-secondary p-4",children:s?(0,r.jsxs)("button",{onClick:x,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",padding:"20px",background:"transparent",border:"none",cursor:"pointer"},className:"jsx-e7a949443a9f8cb0",children:[(0,r.jsx)(P.Z,{size:56,strokeWidth:1.5,className:"text-accent"}),(0,r.jsx)("span",{style:{color:"var(--accent)",fontSize:"14px",fontWeight:500},className:"jsx-e7a949443a9f8cb0",children:"Summary"})]}):(0,r.jsx)("div",{className:"jsx-e7a949443a9f8cb0 flex items-center justify-between",children:(0,r.jsxs)("div",{className:"jsx-e7a949443a9f8cb0",children:[(0,r.jsxs)("div",{className:"jsx-e7a949443a9f8cb0 font-semibold mb-1",children:["Querying ",t.length," models in parallel..."]}),(0,r.jsxs)("div",{className:"jsx-e7a949443a9f8cb0 text-xs opacity-70",children:[a.length,"/",t.length," models completed"]})]})})})})},e.id)}let a=e.id===w&&!o;return(0,r.jsx)(R,{message:e,isStreaming:e.id===p,isLastAssistantMessage:a,onShare:()=>z(e),onRetry:n?()=>n(e.id):void 0,onBranch:i?()=>i(e.id):void 0,onAudioReady:c,onVoiceError:m},e.id)}),o&&(0,r.jsx)("div",{className:"jsx-e7a949443a9f8cb0 loading-container",children:(0,r.jsxs)("div",{className:"jsx-e7a949443a9f8cb0 loading-content",children:[(0,r.jsx)("div",{className:"jsx-e7a949443a9f8cb0 loading-header",children:"Haley"}),(0,r.jsx)(_,{mode:N})]})}),(0,r.jsx)("div",{ref:b,style:{height:"20px"},className:"jsx-e7a949443a9f8cb0"})]})]})}var F=a(4697),L=a(994),Z=a(2365),U=a(2513),O=a(9333);function B(e){let{input:t,setInput:a,isLoading:o,onSend:n,onFileUpload:i,onGallerySelect:l,sidebarOpen:d=!1,onRecordingStart:c,onRecordingStop:m,pendingUploads:x=[]}=e,[b,f]=(0,s.useState)(!1),[p,u]=(0,s.useState)(0),[h,y]=(0,s.useState)(!1),v=(0,s.useRef)(null),w=(0,s.useRef)(null),j=(0,s.useRef)(null),k=(0,s.useRef)([]),z=(0,s.useRef)(),N=(0,s.useRef)(0),S=(0,s.useRef)(null);(0,s.useEffect)(()=>{E()},[t]);let E=()=>{let e=v.current;e&&(e.style.height="auto",e.style.height=Math.min(e.scrollHeight,200)+"px")},C=()=>{(t.trim()||x.length>0)&&(n(t),a(""))},M=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});j.current=t,S.current=e,k.current=[],N.current=Date.now(),t.ondataavailable=e=>{e.data&&e.data.size>0&&k.current.push(e.data)},t.onstop=()=>{if(Date.now(),N.current,0===k.current.length){alert("Recording failed: No audio data captured. Try recording for at least 1 second."),S.current&&S.current.getTracks().forEach(e=>e.stop());return}let e=new Blob(k.current,{type:"audio/webm;codecs=opus"});if(e.size<1e3){alert("Recording too short or failed. Please record for at least 1 second."),S.current&&S.current.getTracks().forEach(e=>e.stop());return}n(void 0,e),S.current&&(S.current.getTracks().forEach(e=>e.stop()),S.current=null)},t.start(100),f(!0),u(0),null==c||c(),z.current=setInterval(()=>{u(e=>e+1)},1e3)}catch(e){alert("Could not access microphone. Please check permissions.")}};return(0,r.jsx)("div",{className:"input-container glass-strong border-t border-border safe-bottom transition-all duration-300 ".concat(d?"md:left-80":"md:left-[60px]"),children:(0,r.jsx)("div",{className:"mx-auto max-w-3xl px-4 md:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"py-4 w-full",children:(0,r.jsx)("div",{className:"relative w-full",children:b?(0,r.jsxs)("div",{className:"flex items-center justify-between bg-panel-dark border border-error rounded-xl px-4 py-3 w-full",children:[(0,r.jsxs)("button",{onClick:()=>{j.current&&b&&(j.current.stop(),f(!1),z.current&&clearInterval(z.current),k.current=[])},className:"text-error hover:text-error/80 transition-colors flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)(F.Z,{size:20}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Cancel"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1 justify-center min-w-0",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-error rounded-full animate-pulse flex-shrink-0"}),(0,r.jsx)("span",{className:"text-secondary text-sm whitespace-nowrap",children:"".concat(Math.floor(p/60),":").concat((p%60).toString().padStart(2,"0"))})]}),(0,r.jsxs)("button",{onClick:()=>{if(j.current&&b){if(Date.now()-N.current<500){alert("Please record for at least 0.5 seconds");return}"recording"===j.current.state&&j.current.requestData(),j.current.stop(),f(!1),null==m||m(),z.current&&clearInterval(z.current)}},className:"text-success hover:text-success/80 transition-colors flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)(L.Z,{size:20}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Send"})]})]}):(0,r.jsxs)(r.Fragment,{children:[h&&(0,r.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 glass-strong rounded-xl border border-border p-2 space-y-1 min-w-[160px] z-50",children:[(0,r.jsx)("input",{ref:w,type:"file",multiple:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&i&&(i(e.target.files),y(!1))},className:"hidden",accept:"*/*"}),(0,r.jsxs)("button",{onClick:()=>{var e;null===(e=w.current)||void 0===e||e.click()},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-panel-light transition-colors text-left",children:[(0,r.jsx)(Z.Z,{size:18}),(0,r.jsx)("span",{className:"text-sm",children:"Attach file"})]}),l&&(0,r.jsxs)("button",{onClick:()=>{l(),y(!1)},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-panel-light transition-colors text-left",children:[(0,r.jsx)(g.Z,{size:18}),(0,r.jsx)("span",{className:"text-sm",children:"Gallery"})]})]}),(0,r.jsxs)("div",{className:"flex items-end gap-2 bg-panel-dark border border-border rounded-xl px-2 py-2 focus-within:border-primary transition-all duration-180 w-full",style:{boxShadow:"var(--input-focus-glow, none)",transitionProperty:"border-color, box-shadow"},onFocus:e=>{e.currentTarget.contains(e.target)&&e.currentTarget.style.setProperty("--input-focus-glow","0 0 0 2px rgba(75, 108, 255, 0.25)")},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||e.currentTarget.style.setProperty("--input-focus-glow","none")},children:[(0,r.jsx)("button",{onClick:()=>y(!h),className:"icon-btn !w-8 !h-8 flex-shrink-0 ".concat(h?"bg-primary text-white":""),title:"More options",children:h?(0,r.jsx)(F.Z,{size:18}):(0,r.jsx)(U.Z,{size:18})}),(0,r.jsx)("textarea",{ref:v,value:t,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C())},placeholder:"Message Haley OS...",className:"flex-1 bg-transparent border-none outline-none resize-none min-h-[36px] max-h-[200px] text-primary placeholder:text-secondary py-1 min-w-0",rows:1}),(0,r.jsx)("button",{onClick:M,className:"icon-btn !w-8 !h-8 flex-shrink-0",title:"Voice input",children:(0,r.jsx)(O.Z,{size:20})}),(0,r.jsx)("button",{onClick:C,disabled:!t.trim()&&0===x.length,className:"icon-btn !w-8 !h-8 flex-shrink-0 ".concat(t.trim()||x.length>0?"bg-primary text-white hover:bg-accent":"opacity-50 cursor-not-allowed"),title:"Send message",children:(0,r.jsx)(L.Z,{size:20})})]})]})})})})})}var G=a(7746),K=a(7589),H=a(3907),J=a(2468),W=a(6884);function q(e){let{files:t,artifacts:a=[],onRemoveFile:o,onRemoveArtifact:n,sidebarOpen:i=!1}=e,[l,d]=(0,s.useState)(new Map),[c,m]=(0,s.useState)(null),[x,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&c&&m(null)};return c&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[c]),(0,s.useEffect)(()=>{let e=new Map;return t.forEach((t,a)=>{if(p(t)){let r=URL.createObjectURL(t);e.set(a,r)}}),d(e),()=>{e.forEach(e=>{URL.revokeObjectURL(e)})}},[t]);let f=[...t.map((e,t)=>({type:"file",data:e,index:t})),...a.map(e=>({type:"artifact",data:e}))];if(0===f.length)return null;let p=e=>{var t;return["jpg","jpeg","png","gif","webp","svg","bmp"].includes((null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"")},z=e=>{var t;let a=(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(a)?g.Z:["pdf","doc","docx","txt","rtf"].includes(a)?h.Z:["xls","xlsx","csv"].includes(a)?y.Z:["zip","rar","7z","tar","gz"].includes(a)?v.Z:["mp4","mov","avi","mkv","webm"].includes(a)?w.Z:["mp3","wav","m4a","ogg","flac"].includes(a)?j.Z:k.Z},N=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):"".concat((e/1048576).toFixed(1)," MB"),S=e=>{switch(e.type){case"code":return G.Z;case"data":case"table":return K.Z;case"llm-response":return H.Z;default:return h.Z}},E=e=>e?({gemini:"Gemini",gpt:"GPT",claude:"Claude",grok:"Grok",perplexity:"Perplexity",meta:"Meta",mistral:"Mistral",haley:"Haley"})[e]||e.charAt(0).toUpperCase()+e.slice(1):"Unknown",C=e=>e.title?e.title:"llm-response"===e.type?"LLM Response":"code"===e.type?"Code (".concat(e.language||"text",")"):"table"===e.type?"Data Table":"Artifact",M=e=>{var t;let a=(null===(t=e.content)||void 0===t?void 0:t.length)||0;return a<1024?"".concat(a," chars"):"".concat((a/1024).toFixed(1)," KB")},A=async e=>{try{await navigator.clipboard.writeText(e.content),b(!0),setTimeout(()=>b(!1),2e3)}catch(e){console.error("Failed to copy artifact content:",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-6cddf960f528ff56 "+"upload-preview-zone glass-strong border-t border-border safe-bottom transition-all duration-300 ".concat(i?"md:left-80":"md:left-[60px]"),children:[(0,r.jsx)(u(),{id:"6cddf960f528ff56",children:".upload-preview-zone.jsx-6cddf960f528ff56{position:fixed;bottom:70px;left:0;right:0;z-index:30}.preview-container.jsx-6cddf960f528ff56{max-width:48rem;margin:0 auto;padding:12px 16px;overflow-x:auto;overflow-y:hidden;max-height:120px}.preview-scroll.jsx-6cddf960f528ff56{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:12px;min-width:-webkit-min-content;min-width:-moz-min-content;min-width:min-content}.file-card.jsx-6cddf960f528ff56{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-width:180px;max-width:180px;height:80px;background:var(--panel-dark);border:1px solid var(--border);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:12px;position:relative;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;overflow:hidden}.file-card.jsx-6cddf960f528ff56:hover{border-color:var(--primary)}.image-thumbnail.jsx-6cddf960f528ff56{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;opacity:1}.image-overlay.jsx-6cddf960f528ff56{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.6);padding:6px 8px;z-index:1;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.image-overlay.jsx-6cddf960f528ff56 .file-name.jsx-6cddf960f528ff56{font-size:11px;font-weight:500;color:white;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;line-height:1.2;margin-bottom:2px}.image-overlay.jsx-6cddf960f528ff56 .file-size.jsx-6cddf960f528ff56{font-size:10px;color:rgba(255,255,255,.8)}.model-badge.jsx-6cddf960f528ff56{position:absolute;top:8px;left:8px;background:rgba(75,108,255,.9);color:white;font-size:9px;font-weight:600;padding:2px 6px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;z-index:2;text-transform:uppercase;letter-spacing:.5px}.artifact-card.jsx-6cddf960f528ff56{background:-webkit-linear-gradient(315deg,rgba(75,108,255,.1)0%,rgba(75,108,255,.05)100%);background:-moz-linear-gradient(315deg,rgba(75,108,255,.1)0%,rgba(75,108,255,.05)100%);background:-o-linear-gradient(315deg,rgba(75,108,255,.1)0%,rgba(75,108,255,.05)100%);background:linear-gradient(135deg,rgba(75,108,255,.1)0%,rgba(75,108,255,.05)100%);border-color:rgba(75,108,255,.3)}.artifact-card.jsx-6cddf960f528ff56:hover{border-color:rgba(75,108,255,.6)}.file-header.jsx-6cddf960f528ff56{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:8px;margin-bottom:8px}.file-icon.jsx-6cddf960f528ff56{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--accent)}.file-name.jsx-6cddf960f528ff56{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;font-size:13px;font-weight:500;color:var(--text-primary);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;line-height:1.3}.remove-btn.jsx-6cddf960f528ff56{position:absolute;top:8px;right:8px;width:20px;height:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.6);border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;color:white;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;padding:0;z-index:2}.remove-btn.jsx-6cddf960f528ff56:hover{background:var(--error);color:white}.file-size.jsx-6cddf960f528ff56{font-size:11px;color:var(--text-secondary);margin-top:auto}.artifact-card.jsx-6cddf960f528ff56{cursor:pointer}@media(max-width:768px){.upload-preview-zone.jsx-6cddf960f528ff56{bottom:90px;left:0!important}}"}),(0,r.jsx)("div",{className:"jsx-6cddf960f528ff56 preview-container",children:(0,r.jsx)("div",{className:"jsx-6cddf960f528ff56 preview-scroll",children:f.map((e,t)=>{if("file"===e.type){let t=e.data,a=e.index,s=z(t),n=p(t),i=l.get(a);return(0,r.jsxs)("div",{className:"jsx-6cddf960f528ff56 "+"file-card ".concat(n?"has-image":""),children:[n&&i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:i,alt:t.name,className:"jsx-6cddf960f528ff56 image-thumbnail"}),(0,r.jsxs)("div",{className:"jsx-6cddf960f528ff56 image-overlay",children:[(0,r.jsx)("div",{title:t.name,className:"jsx-6cddf960f528ff56 file-name",children:t.name}),(0,r.jsx)("div",{className:"jsx-6cddf960f528ff56 file-size",children:N(t.size)})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-6cddf960f528ff56 file-header",children:[(0,r.jsx)(s,{size:18,className:"jsx-6cddf960f528ff56 file-icon"}),(0,r.jsx)("div",{title:t.name,className:"jsx-6cddf960f528ff56 file-name",children:t.name})]}),(0,r.jsx)("div",{className:"jsx-6cddf960f528ff56 file-size",children:N(t.size)})]}),(0,r.jsx)("button",{onClick:()=>o(a),"aria-label":"Remove file",title:"Remove file",className:"jsx-6cddf960f528ff56 remove-btn",children:(0,r.jsx)(F.Z,{size:14})})]},"file-".concat(t.name,"-").concat(a))}{let t=e.data,a=S(t),s=C(t),o=M(t),i=E(t.modelId);return(0,r.jsxs)("div",{onClick:()=>m(t),className:"jsx-6cddf960f528ff56 file-card artifact-card",children:[t.modelId&&(0,r.jsx)("div",{className:"jsx-6cddf960f528ff56 model-badge",children:i}),(0,r.jsxs)("div",{className:"jsx-6cddf960f528ff56 file-header",children:[(0,r.jsx)(a,{size:18,className:"jsx-6cddf960f528ff56 file-icon"}),!("llm-response"===t.type&&t.modelId)&&(0,r.jsx)("div",{title:s,className:"jsx-6cddf960f528ff56 file-name",children:s})]}),(0,r.jsx)("div",{className:"jsx-6cddf960f528ff56 file-size",children:o}),n&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),n(t.id)},"aria-label":"Remove artifact",title:"Remove artifact",className:"jsx-6cddf960f528ff56 remove-btn",children:(0,r.jsx)(F.Z,{size:14})})]},"artifact-".concat(t.id))}})})})]}),c&&(0,r.jsxs)("div",{onClick:()=>m(null),className:"jsx-32d6bf991a94e80a modal-overlay",children:[(0,r.jsx)(u(),{id:"32d6bf991a94e80a",children:'.modal-overlay.jsx-32d6bf991a94e80a{position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:99999;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);-webkit-animation:fadeIn.2s ease-out;-moz-animation:fadeIn.2s ease-out;-o-animation:fadeIn.2s ease-out;animation:fadeIn.2s ease-out}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes slideUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.modal-content.jsx-32d6bf991a94e80a{background:var(--panel-dark);border:1px solid var(--border);-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;width:90vw;height:90vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;-webkit-box-shadow:0 20px 60px rgba(0,0,0,.5);-moz-box-shadow:0 20px 60px rgba(0,0,0,.5);box-shadow:0 20px 60px rgba(0,0,0,.5);-webkit-animation:slideUp.3s ease-out;-moz-animation:slideUp.3s ease-out;-o-animation:slideUp.3s ease-out;animation:slideUp.3s ease-out}.modal-header.jsx-32d6bf991a94e80a{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:24px 32px;border-bottom:1px solid var(--border);background:var(--panel)}.modal-title.jsx-32d6bf991a94e80a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:16px;font-size:20px;font-weight:600;color:var(--text-primary)}.modal-actions.jsx-32d6bf991a94e80a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.modal-btn.jsx-32d6bf991a94e80a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;padding:8px 16px;background:var(--primary);color:white;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-btn.jsx-32d6bf991a94e80a:hover{background:var(--primary-hover)}.modal-btn.copied.jsx-32d6bf991a94e80a{background:var(--success)}.modal-close.jsx-32d6bf991a94e80a{width:40px;height:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(255,255,255,.05);border:1px solid var(--border);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;color:var(--text-primary);cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-close.jsx-32d6bf991a94e80a:hover{background:rgba(255,255,255,.1);border-color:var(--primary);color:var(--primary);-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}.modal-close.jsx-32d6bf991a94e80a:active{-webkit-transform:scale(.95);-moz-transform:scale(.95);-ms-transform:scale(.95);-o-transform:scale(.95);transform:scale(.95)}.modal-body.jsx-32d6bf991a94e80a{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow-y:auto;overflow-x:hidden;padding:32px;background:var(--panel-dark)}.modal-body.jsx-32d6bf991a94e80a::-webkit-scrollbar{width:12px}.modal-body.jsx-32d6bf991a94e80a::-webkit-scrollbar-track{background:transparent}.modal-body.jsx-32d6bf991a94e80a::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;border:3px solid transparent;background-clip:padding-box}.modal-body.jsx-32d6bf991a94e80a::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.3);background-clip:padding-box}.artifact-content.jsx-32d6bf991a94e80a{background:var(--panel);border:1px solid var(--border);-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:24px;font-family:"Monaco","Menlo","Courier New",monospace;font-size:14px;line-height:1.7;color:var(--text-primary);white-space:pre-wrap;word-break:break-word;min-height:100%}@media(max-width:768px){.modal-content.jsx-32d6bf991a94e80a{width:95vw;height:95vh;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.modal-header.jsx-32d6bf991a94e80a{padding:16px 20px}.modal-title.jsx-32d6bf991a94e80a{font-size:18px;gap:12px}.modal-body.jsx-32d6bf991a94e80a{padding:20px}.artifact-content.jsx-32d6bf991a94e80a{padding:16px;font-size:13px}.modal-close.jsx-32d6bf991a94e80a{width:36px;height:36px}}'}),(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-32d6bf991a94e80a modal-content",children:[(0,r.jsxs)("div",{className:"jsx-32d6bf991a94e80a modal-header",children:[(0,r.jsxs)("div",{className:"jsx-32d6bf991a94e80a modal-title",children:[(()=>{let e=S(c);return(0,r.jsx)(e,{size:24,className:"jsx-32d6bf991a94e80a"})})(),(0,r.jsx)("span",{className:"jsx-32d6bf991a94e80a",children:C(c)}),c.modelId&&(0,r.jsx)("span",{className:"jsx-32d6bf991a94e80a model-badge",children:E(c.modelId)})]}),(0,r.jsxs)("div",{className:"jsx-32d6bf991a94e80a modal-actions",children:[(0,r.jsx)("button",{onClick:()=>A(c),className:"jsx-32d6bf991a94e80a "+"modal-btn ".concat(x?"copied":""),children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.Z,{size:18}),"Copied"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{size:18}),"Copy"]})}),(0,r.jsx)("button",{onClick:()=>m(null),"aria-label":"Close modal",title:"Close (ESC)",className:"jsx-32d6bf991a94e80a modal-close",children:(0,r.jsx)(F.Z,{size:24})})]})]}),(0,r.jsx)("div",{className:"jsx-32d6bf991a94e80a modal-body",children:(0,r.jsx)("div",{className:"jsx-32d6bf991a94e80a artifact-content",children:c.content})})]})]})]})}var V=a(2421),Q=a(4392),X=a(7063),Y=a(1106);let $=["portalOpen","spiralIn","dimensionShift","mysticalEntrance","drStrangeRing"];function ee(e){let{isOpen:t,content:a,researchEnabled:o,logicEngineEnabled:n,onClose:i}=e,[l,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)($[0]),[x,b]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{t&&(m($[Math.floor(Math.random()*$.length)]),document.documentElement.style.setProperty("--magic-rotation","".concat(Math.floor(360*Math.random()),"deg")))},[t]),t)?(0,r.jsxs)("div",{className:"magic-window ".concat(l?"maximized":""," ").concat(c),style:{width:l?"90vw":"380px",height:l?"85vh":x?"500px":"80px",right:l?"auto":"20px",left:l?"50%":"auto",top:l?"50%":"auto",bottom:l?"auto":"80px",transform:l?"translate(-50%, -50%)":"none",transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},children:[(0,r.jsx)("div",{className:"portal-ring",style:{opacity:.35}}),(0,r.jsx)("div",{className:"portal-ring-outer",style:{opacity:.25}}),(0,r.jsx)("div",{className:"portal-sparks",style:{opacity:.2}}),(0,r.jsxs)("div",{className:"rounded-[24px] w-full h-full flex flex-col overflow-hidden relative z-10",style:{background:"rgba(17, 20, 24, 0.35)",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-border/30",children:[(0,r.jsxs)("button",{onClick:()=>b(!x),className:"flex items-center gap-2 text-sm font-semibold text-gradient flex-1 text-left",children:[x?(0,r.jsx)(V.Z,{size:16}):(0,r.jsx)(Q.Z,{size:16}),(0,r.jsx)(H.Z,{size:16,className:"text-primary"}),(0,r.jsx)("span",{children:"Magic Window"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>d(!l),className:"icon-btn !w-8 !h-8",title:l?"Minimize":"Maximize",children:l?(0,r.jsx)(X.Z,{size:16}):(0,r.jsx)(Y.Z,{size:16})}),(0,r.jsx)("button",{onClick:i,className:"icon-btn !w-8 !h-8",title:"Close",children:(0,r.jsx)(F.Z,{size:16})})]})]}),x&&(0,r.jsx)("div",{className:"px-3 py-2 border-b border-border/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(o?"bg-success animate-pulse":"bg-secondary/30")}),(0,r.jsx)("span",{className:o?"text-success":"text-secondary",children:"Research"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(n?"bg-success animate-pulse":"bg-secondary/30")}),(0,r.jsx)("span",{className:n?"text-success":"text-secondary",children:"Logic Engine"})]})]})}),x&&(0,r.jsx)("div",{className:"flex-1 overflow-auto p-4 animate-fadeIn",children:a?function(e){switch(e.type){case"visualization":return(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4 animate-spin-slow",children:"\uD83D\uDD2E"}),(0,r.jsx)("p",{className:"text-secondary",children:"Visualization rendering..."}),(0,r.jsx)("p",{className:"text-xs text-secondary mt-2",children:e.title})]})});case"code":return(0,r.jsx)("pre",{className:"bg-panel-dark/50 p-4 rounded-lg overflow-x-auto text-sm font-mono",children:(0,r.jsx)("code",{children:"string"==typeof e.content?e.content:JSON.stringify(e.content,null,2)})});case"image":return(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("img",{src:e.content,alt:"Magic Window Content",className:"max-w-full max-h-full object-contain rounded-lg"})});case"data":return(0,r.jsx)("div",{className:"space-y-2",children:Object.entries(e.content).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"bg-panel-dark/50 p-3 rounded-lg",children:[(0,r.jsx)("div",{className:"text-xs text-secondary uppercase mb-1",children:t}),(0,r.jsx)("div",{className:"text-primary font-mono",children:String(a)})]},t)})});default:return(0,r.jsx)("div",{className:"text-secondary",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(e.content,null,2)})})}}(a):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4 animate-float",children:"\uD83D\uDD2E"}),(0,r.jsx)("p",{className:"text-secondary text-sm",children:"Magic Window ready..."})]})})})]})]}):null}var et=a(1240),ea=a(8688);let er=[{id:"gemini",name:"Gemini",provider:"Google",color:"bg-yellow-500/20 border-yellow-500"},{id:"gpt",name:"GPT-4",provider:"OpenAI",color:"bg-green-500/20 border-green-500"},{id:"claude",name:"Claude",provider:"Anthropic",color:"bg-red-500/20 border-red-500"},{id:"llama",name:"Llama",provider:"Meta",color:"bg-purple-500/20 border-purple-500"},{id:"perplexity",name:"Perplexity",provider:"Perplexity AI",color:"bg-cyan-500/20 border-cyan-500"},{id:"mistral",name:"Mistral",provider:"Mistral AI",color:"bg-blue-500/20 border-blue-500"},{id:"grok",name:"Grok",provider:"xAI",color:"bg-pink-500/20 border-pink-500"}];function es(e){let{isOpen:t,currentMode:a,activeModel:o,onClose:n,onSelectMode:i,onSelectModel:l,availableModels:d,availableAgents:c}=e,[m,x]=(0,s.useState)("haley");if(!t)return null;let b=e=>{x(e),"haley"===e&&(i("haley"),n())},f=e=>{l(e),n()};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[1002] flex items-center justify-center",onClick:n,children:(0,r.jsxs)("div",{className:"glass-strong rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gradient",children:"Select Mode"}),(0,r.jsx)("button",{onClick:n,className:"icon-btn",children:(0,r.jsx)(F.Z,{size:20})})]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>b("haley"),className:"flex-1 flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ".concat("haley"===m?"bg-primary/20 border-primary text-primary":"bg-panel-medium border-border text-secondary hover:border-accent"),children:[(0,r.jsx)(H.Z,{size:20}),(0,r.jsx)("span",{className:"font-semibold",children:"Haley"})]}),(0,r.jsxs)("button",{onClick:()=>x("ais"),className:"flex-1 flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ".concat("ais"===m?"bg-primary/20 border-primary text-primary":"bg-panel-medium border-border text-secondary hover:border-accent"),children:[(0,r.jsx)(et.Z,{size:20}),(0,r.jsx)("span",{className:"font-semibold",children:"AIs"})]}),(0,r.jsxs)("button",{onClick:()=>x("agents"),className:"flex-1 flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ".concat("agents"===m?"bg-primary/20 border-primary text-primary":"bg-panel-medium border-border text-secondary hover:border-accent"),children:[(0,r.jsx)(ea.Z,{size:20}),(0,r.jsx)("span",{className:"font-semibold",children:"Agents"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:["haley"===m&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(H.Z,{size:48,className:"mx-auto text-primary mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Baby Haley Mode"}),(0,r.jsx)("p",{className:"text-secondary text-sm",children:"Return to the primary Haley assistant interface with full orchestration capabilities."})]}),"ais"===m&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-secondary mb-3",children:"AI Models"}),er.map(e=>(0,r.jsx)("button",{onClick:()=>f(e.id),className:"w-full p-4 rounded-xl border transition-all text-left ".concat(o===e.id?e.color:"bg-panel-medium border-border hover:border-accent"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-primary",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-secondary mt-1",children:e.provider})]}),o===e.id&&(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-success animate-pulse"})]})},e.id))]}),"agents"===m&&(0,r.jsx)("div",{className:"space-y-3",children:0===c.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(ea.Z,{size:48,className:"mx-auto text-secondary opacity-50 mb-4"}),(0,r.jsx)("p",{className:"text-secondary text-sm",children:"No agents configured yet"})]}):c.map(e=>(0,r.jsxs)("button",{onClick:()=>{n()},className:"w-full p-4 rounded-xl border bg-panel-medium border-border hover:border-accent transition-all text-left",children:[(0,r.jsx)("div",{className:"font-semibold text-primary",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-secondary mt-1",children:e.description})]},e.id))})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-border",children:(0,r.jsx)("p",{className:"text-xs text-secondary text-center",children:'Long press "Haley" in the header to open this menu'})})]})})}function eo(e){let{isPlaying:t=!1,isListening:a=!1,hasError:s=!1,errorMessage:o="Sorry, no connection available"}=e;return(console.log("[VOICE STATUS BAR] Render - isPlaying:",t,"isListening:",a,"hasError:",s),t||a||s)?(console.log("[VOICE STATUS BAR] SHOWING BAR!"),(0,r.jsxs)("div",{className:"jsx-75ff99d6c5a59d20 fixed top-0 left-0 right-0 z-[100] safe-top",children:[s&&(0,r.jsx)("div",{className:"jsx-75ff99d6c5a59d20 bg-red-900/80 backdrop-blur-sm border-b border-red-700 px-4 py-2",children:(0,r.jsx)("div",{className:"jsx-75ff99d6c5a59d20 flex items-center justify-center gap-2 text-red-100",children:(0,r.jsx)("span",{className:"jsx-75ff99d6c5a59d20 text-sm font-medium",children:o})})}),t&&!s&&(0,r.jsx)("div",{className:"jsx-75ff99d6c5a59d20 bg-blue-900/60 backdrop-blur-sm border-b border-blue-700/50 px-4 py-2",children:(0,r.jsxs)("div",{className:"jsx-75ff99d6c5a59d20 flex items-center justify-center gap-3",children:[(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",className:"jsx-75ff99d6c5a59d20 animate-pulse",children:[(0,r.jsx)("rect",{x:"2",y:"8",width:"2",height:"8",fill:"currentColor",className:"jsx-75ff99d6c5a59d20 text-blue-300 animate-wave-1"}),(0,r.jsx)("rect",{x:"6",y:"4",width:"2",height:"16",fill:"currentColor",className:"jsx-75ff99d6c5a59d20 text-blue-300 animate-wave-2"}),(0,r.jsx)("rect",{x:"10",y:"6",width:"2",height:"12",fill:"currentColor",className:"jsx-75ff99d6c5a59d20 text-blue-300 animate-wave-3"}),(0,r.jsx)("rect",{x:"14",y:"4",width:"2",height:"16",fill:"currentColor",className:"jsx-75ff99d6c5a59d20 text-blue-300 animate-wave-2"}),(0,r.jsx)("rect",{x:"18",y:"8",width:"2",height:"8",fill:"currentColor",className:"jsx-75ff99d6c5a59d20 text-blue-300 animate-wave-1"})]}),(0,r.jsx)("span",{className:"jsx-75ff99d6c5a59d20 text-sm font-medium text-blue-100",children:"Haley is speaking..."})]})}),a&&!s&&!t&&(0,r.jsx)("div",{className:"jsx-75ff99d6c5a59d20 bg-purple-900/60 backdrop-blur-sm border-b border-purple-700/50 px-4 py-2",children:(0,r.jsxs)("div",{className:"jsx-75ff99d6c5a59d20 flex items-center justify-center gap-3",children:[(0,r.jsx)(O.Z,{size:16,className:"text-purple-300 animate-pulse"}),(0,r.jsx)("span",{className:"jsx-75ff99d6c5a59d20 text-sm font-medium text-purple-100",children:"Listening..."})]})}),(0,r.jsx)(u(),{id:"75ff99d6c5a59d20",children:"@-webkit-keyframes wave-1{0%,100%{height:8px}50%{height:16px}}@-moz-keyframes wave-1{0%,100%{height:8px}50%{height:16px}}@-o-keyframes wave-1{0%,100%{height:8px}50%{height:16px}}@keyframes wave-1{0%,100%{height:8px}50%{height:16px}}@-webkit-keyframes wave-2{0%,100%{height:16px}50%{height:8px}}@-moz-keyframes wave-2{0%,100%{height:16px}50%{height:8px}}@-o-keyframes wave-2{0%,100%{height:16px}50%{height:8px}}@keyframes wave-2{0%,100%{height:16px}50%{height:8px}}@-webkit-keyframes wave-3{0%,100%{height:12px}50%{height:20px}}@-moz-keyframes wave-3{0%,100%{height:12px}50%{height:20px}}@-o-keyframes wave-3{0%,100%{height:12px}50%{height:20px}}@keyframes wave-3{0%,100%{height:12px}50%{height:20px}}.animate-wave-1.jsx-75ff99d6c5a59d20{-webkit-animation:wave-1 1s ease-in-out infinite;-moz-animation:wave-1 1s ease-in-out infinite;-o-animation:wave-1 1s ease-in-out infinite;animation:wave-1 1s ease-in-out infinite}.animate-wave-2.jsx-75ff99d6c5a59d20{-webkit-animation:wave-2 1s ease-in-out infinite;-moz-animation:wave-2 1s ease-in-out infinite;-o-animation:wave-2 1s ease-in-out infinite;animation:wave-2 1s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.animate-wave-3.jsx-75ff99d6c5a59d20{-webkit-animation:wave-3 1s ease-in-out infinite;-moz-animation:wave-3 1s ease-in-out infinite;-o-animation:wave-3 1s ease-in-out infinite;animation:wave-3 1s ease-in-out infinite;-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}"})]})):(console.log("[VOICE STATUS BAR] All states false - returning null (hidden)"),null)}var en=a(4841),ei=a(8094);function el(e){let{audioUrl:t,isPlaying:a,onPlayPause:o,onClose:n,text:i="Haley is speaking..."}=e,[l,d]=(0,s.useState)(0),[c,m]=(0,s.useState)(0),[x,b]=(0,s.useState)(0),f=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[100] safe-top",children:(0,r.jsx)("div",{className:"bg-blue-900/90 backdrop-blur-sm border-b border-blue-700/50 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 max-w-4xl mx-auto",children:[(0,r.jsx)("button",{onClick:o,className:"flex-shrink-0 p-2 rounded-full bg-blue-700 hover:bg-blue-600 transition-colors","aria-label":a?"Pause":"Play",children:a?(0,r.jsx)(en.Z,{size:20,className:"text-white"}):(0,r.jsx)(ei.Z,{size:20,className:"text-white"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-100 mb-1 truncate",children:i}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs text-blue-200",children:f(x)}),(0,r.jsx)("div",{className:"flex-1 h-1 bg-blue-800 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-blue-300 transition-all duration-300",style:{width:"".concat(l,"%")}})}),(0,r.jsx)("span",{className:"text-xs text-blue-200",children:f(c)})]})]}),(0,r.jsx)("button",{onClick:n,className:"flex-shrink-0 p-2 rounded-full hover:bg-blue-800 transition-colors","aria-label":"Close",children:(0,r.jsx)(F.Z,{size:20,className:"text-blue-200"})})]})})})}var ed=a(7164);function ec(e){let{artifacts:t,onClose:a}=e,[o,n]=(0,s.useState)(!1),[i,l]=(0,s.useState)(t.length>0?t[0].id:null);if(0===t.length)return null;let d=t.find(e=>e.id===i),c=e=>{switch(e){case"code":return(0,r.jsx)(G.Z,{className:"w-4 h-4"});case"table":return(0,r.jsx)(y.Z,{className:"w-4 h-4"});default:return(0,r.jsx)(h.Z,{className:"w-4 h-4"})}},m=e=>{if(!e)return null;let t={gemini:{initial:"G",color:"bg-blue-600"},gpt:{initial:"C",color:"bg-green-600"},claude:{initial:"A",color:"bg-purple-600"},llama:{initial:"L",color:"bg-orange-600"},perplexity:{initial:"P",color:"bg-cyan-600"},mistral:{initial:"M",color:"bg-red-600"},grok:{initial:"X",color:"bg-yellow-600"}}[e]||{initial:e[0].toUpperCase(),color:"bg-gray-600"};return(0,r.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full ".concat(t.color," text-white text-xs font-bold"),children:t.initial})},x=e=>{let t=e.language||"txt",a="".concat(e.title||"artifact",".").concat(t),r=new Blob([e.content],{type:"text/plain"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=a,o.click(),URL.revokeObjectURL(s)};return(0,r.jsxs)("div",{className:"fixed right-0 top-0 bottom-0 bg-gray-900 border-l border-gray-700 transition-all duration-300 z-40 ".concat(o?"w-full":"w-96"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(G.Z,{className:"w-5 h-5 text-blue-400"}),(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"Artifacts"}),(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:["(",t.length,")"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>n(!o),className:"p-1 hover:bg-gray-800 rounded","aria-label":o?"Minimize":"Maximize",children:o?(0,r.jsx)(X.Z,{className:"w-4 h-4"}):(0,r.jsx)(Y.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-800 rounded","aria-label":"Close",children:(0,r.jsx)(F.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"flex flex-col h-[calc(100%-60px)]",children:[(0,r.jsx)("div",{className:"flex-shrink-0 px-4 py-2 bg-gray-800 border-b border-gray-700",children:(0,r.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:t.map(e=>(0,r.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center gap-2 px-3 py-1.5 rounded text-sm whitespace-nowrap transition-colors ".concat(i===e.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[e.modelId&&m(e.modelId),c(e.type),e.title||e.type,e.isStreaming&&(0,r.jsx)("span",{className:"ml-1 text-xs opacity-70",children:"streaming..."})]},e.id))})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto p-4",children:d&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[d.title&&(0,r.jsx)("h3",{className:"text-lg font-semibold",children:d.title}),(0,r.jsx)("button",{onClick:()=>x(d),className:"p-1 hover:bg-gray-700 rounded",title:"Download",children:(0,r.jsx)(ed.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("pre",{className:"bg-gray-800 p-4 rounded overflow-x-auto text-sm",children:(0,r.jsx)("code",{className:"language-".concat(d.language||"text"),children:d.content})})]})})]})]})}var em=a(9266);function ex(e){let{suggestions:t,onSelect:a,sidebarOpen:o=!1}=e,[n,i]=(0,s.useState)(!1);if(n||0===t.length)return null;let l=e=>{i(!0),a(e)};return(0,r.jsxs)("div",{className:"jsx-8a2043c7b10a605c "+"suggested-replies glass-strong border-t border-border safe-bottom transition-all duration-300 ".concat(o?"md:left-80":"md:left-[60px]"),children:[(0,r.jsx)(u(),{id:"8a2043c7b10a605c",children:".suggested-replies.jsx-8a2043c7b10a605c{position:fixed;bottom:70px;left:0;right:0;z-index:29}.suggestions-container.jsx-8a2043c7b10a605c{max-width:48rem;margin:0 auto;padding:12px 16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.suggestion-button.jsx-8a2043c7b10a605c{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 20px;background:var(--primary);color:white;border:1px solid rgba(75,108,255,.5);-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;font-size:14px;font-weight:500;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;white-space:nowrap}.suggestion-button.jsx-8a2043c7b10a605c:hover{background:var(--primary-hover);border-color:rgba(75,108,255,.8);-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.suggestion-button.jsx-8a2043c7b10a605c:active{-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}@media(max-width:768px){.suggested-replies.jsx-8a2043c7b10a605c{bottom:90px;left:0!important}.suggestions-container.jsx-8a2043c7b10a605c{padding:8px 12px}.suggestion-button.jsx-8a2043c7b10a605c{font-size:13px;padding:6px 16px}}"}),(0,r.jsx)("div",{className:"jsx-8a2043c7b10a605c suggestions-container",children:t.map((e,t)=>(0,r.jsx)("button",{onClick:()=>l(e),className:"jsx-8a2043c7b10a605c suggestion-button",children:e},t))})]})}function eb(e){let{onClick:t,sidebarOpen:a}=e;return(0,r.jsxs)("button",{onClick:t,"aria-label":"Summarize multi-LLM responses",style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",marginLeft:a?"140px":"0",zIndex:28,background:"transparent",border:"none",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",transition:"all 0.2s ease",padding:"12px"},className:"jsx-33262a8d6fe585f5 summarize-button",children:[(0,r.jsx)(b,{size:32,strokeWidth:2,className:"envelope-wings-icon"}),(0,r.jsx)("span",{style:{fontSize:"12px",fontWeight:600,color:"var(--text-primary)",textShadow:"0 1px 3px rgba(0, 0, 0, 0.5)",letterSpacing:"0.5px"},className:"jsx-33262a8d6fe585f5",children:"AI Summary"}),(0,r.jsx)(u(),{id:"33262a8d6fe585f5",children:".summarize-button.jsx-33262a8d6fe585f5{-webkit-animation:float 3s ease-in-out infinite;-moz-animation:float 3s ease-in-out infinite;-o-animation:float 3s ease-in-out infinite;animation:float 3s ease-in-out infinite}.summarize-button.jsx-33262a8d6fe585f5:hover{-webkit-transform:translatex(-50%)scale(1.1);-moz-transform:translatex(-50%)scale(1.1);-ms-transform:translatex(-50%)scale(1.1);-o-transform:translatex(-50%)scale(1.1);transform:translatex(-50%)scale(1.1)}.summarize-button.jsx-33262a8d6fe585f5:active{-webkit-transform:translatex(-50%)scale(.95);-moz-transform:translatex(-50%)scale(.95);-ms-transform:translatex(-50%)scale(.95);-o-transform:translatex(-50%)scale(.95);transform:translatex(-50%)scale(.95)}.envelope-wings-icon.jsx-33262a8d6fe585f5{color:var(--accent);-webkit-filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}@-webkit-keyframes float{0%,100%{-webkit-transform:translatey(0);transform:translatey(0)}50%{-webkit-transform:translatey(-8px);transform:translatey(-8px)}}@-moz-keyframes float{0%,100%{-moz-transform:translatey(0);transform:translatey(0)}50%{-moz-transform:translatey(-8px);transform:translatey(-8px)}}@-o-keyframes float{0%,100%{-o-transform:translatey(0);transform:translatey(0)}50%{-o-transform:translatey(-8px);transform:translatey(-8px)}}@keyframes float{0%,100%{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}50%{-webkit-transform:translatey(-8px);-moz-transform:translatey(-8px);-o-transform:translatey(-8px);transform:translatey(-8px)}}@media(max-width:768px){.summarize-button.jsx-33262a8d6fe585f5{bottom:90px}}"})]})}function ef(e){let{isLoading:t,summaryText:a,onClose:o,sidebarOpen:n}=e,[i,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o()};return document.addEventListener("keydown",e),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[o]);let d=async()=>{try{await navigator.clipboard.writeText(a),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){console.error("Failed to copy summary:",e)}};return(0,r.jsxs)("div",{onClick:e=>{e.target===e.currentTarget&&o()},className:"jsx-918dfb2e744d8974 modal-overlay",children:[(0,r.jsx)(u(),{id:"918dfb2e744d8974",children:".modal-overlay.jsx-918dfb2e744d8974{position:fixed;inset:0;background:rgba(0,0,0,.92);z-index:99999;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);-webkit-animation:fadeIn.2s ease-out;-moz-animation:fadeIn.2s ease-out;-o-animation:fadeIn.2s ease-out;animation:fadeIn.2s ease-out}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-moz-keyframes fadeIn{from{opacity:0}to{opacity:1}}@-o-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes slideUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.modal-content.jsx-918dfb2e744d8974{background:var(--panel-dark);border:1px solid var(--border);-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;width:90vw;height:90vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;-webkit-box-shadow:0 20px 60px rgba(0,0,0,.5);-moz-box-shadow:0 20px 60px rgba(0,0,0,.5);box-shadow:0 20px 60px rgba(0,0,0,.5);-webkit-animation:slideUp.3s ease-out;-moz-animation:slideUp.3s ease-out;-o-animation:slideUp.3s ease-out;animation:slideUp.3s ease-out}.modal-header.jsx-918dfb2e744d8974{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:24px 32px;border-bottom:1px solid var(--border);background:var(--panel)}.modal-title.jsx-918dfb2e744d8974{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:16px;font-size:20px;font-weight:600;color:var(--text-primary)}.envelope-icon.jsx-918dfb2e744d8974{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.modal-actions.jsx-918dfb2e744d8974{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.modal-btn.jsx-918dfb2e744d8974{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:6px;padding:8px 16px;background:var(--primary);color:white;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-btn.jsx-918dfb2e744d8974:hover{background:var(--primary-hover)}.modal-btn.copied.jsx-918dfb2e744d8974{background:var(--success)}.modal-close.jsx-918dfb2e744d8974{width:40px;height:40px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(255,255,255,.05);border:1px solid var(--border);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;color:var(--text-primary);cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-close.jsx-918dfb2e744d8974:hover{background:rgba(255,255,255,.1);border-color:var(--primary);color:var(--primary);-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}.modal-close.jsx-918dfb2e744d8974:active{-webkit-transform:scale(.95);-moz-transform:scale(.95);-ms-transform:scale(.95);-o-transform:scale(.95);transform:scale(.95)}.modal-body.jsx-918dfb2e744d8974{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow-y:auto;overflow-x:hidden;padding:32px;background:var(--panel-dark);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.modal-body.jsx-918dfb2e744d8974::-webkit-scrollbar{width:12px}.modal-body.jsx-918dfb2e744d8974::-webkit-scrollbar-track{background:transparent}.modal-body.jsx-918dfb2e744d8974::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;border:3px solid transparent;background-clip:padding-box}.modal-body.jsx-918dfb2e744d8974::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.3);background-clip:padding-box}.loading-container.jsx-918dfb2e744d8974{text-align:center;padding:40px 20px}.loading-text.jsx-918dfb2e744d8974{margin-top:16px;color:var(--text-secondary);font-size:14px}.summary-content.jsx-918dfb2e744d8974{background:var(--panel);border:1px solid var(--border);-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:24px;font-size:14px;line-height:1.7;color:var(--text-primary);white-space:pre-wrap;word-break:break-word;width:100%}@media(max-width:768px){.modal-content.jsx-918dfb2e744d8974{width:95vw;height:95vh;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.modal-header.jsx-918dfb2e744d8974{padding:16px 20px}.modal-title.jsx-918dfb2e744d8974{font-size:18px;gap:12px}.modal-body.jsx-918dfb2e744d8974{padding:20px}.summary-content.jsx-918dfb2e744d8974{padding:16px;font-size:13px}.modal-close.jsx-918dfb2e744d8974{width:36px;height:36px}}"}),(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-918dfb2e744d8974 modal-content",children:[(0,r.jsxs)("div",{className:"jsx-918dfb2e744d8974 modal-header",children:[(0,r.jsxs)("div",{className:"jsx-918dfb2e744d8974 modal-title",children:[(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"var(--accent)",strokeWidth:"2",className:"jsx-918dfb2e744d8974 envelope-icon",children:[(0,r.jsx)("path",{d:"M1 8C1 8 4 5 7 5",strokeLinecap:"round",className:"jsx-918dfb2e744d8974"}),(0,r.jsx)("path",{d:"M23 8C23 8 20 5 17 5",strokeLinecap:"round",className:"jsx-918dfb2e744d8974"}),(0,r.jsx)("rect",{x:"4",y:"8",width:"16",height:"12",rx:"2",className:"jsx-918dfb2e744d8974"}),(0,r.jsx)("path",{d:"M4 8L12 14L20 8",className:"jsx-918dfb2e744d8974"})]}),(0,r.jsx)("span",{className:"jsx-918dfb2e744d8974",children:"AI Summary"})]}),(0,r.jsxs)("div",{className:"jsx-918dfb2e744d8974 modal-actions",children:[!t&&a&&(0,r.jsx)("button",{onClick:d,className:"jsx-918dfb2e744d8974 "+"modal-btn ".concat(i?"copied":""),children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.Z,{size:18}),"Copied"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{size:18}),"Copy"]})}),(0,r.jsx)("button",{onClick:o,"aria-label":"Close modal",title:"Close (ESC)",className:"jsx-918dfb2e744d8974 modal-close",children:(0,r.jsx)(F.Z,{size:24})})]})]}),(0,r.jsx)("div",{className:"jsx-918dfb2e744d8974 modal-body",children:t?(0,r.jsxs)("div",{className:"jsx-918dfb2e744d8974 loading-container",children:[(0,r.jsxs)("div",{className:"jsx-918dfb2e744d8974 typing-indicator",children:[(0,r.jsx)("div",{className:"jsx-918dfb2e744d8974 typing-dot"}),(0,r.jsx)("div",{className:"jsx-918dfb2e744d8974 typing-dot"}),(0,r.jsx)("div",{className:"jsx-918dfb2e744d8974 typing-dot"})]}),(0,r.jsx)("p",{className:"jsx-918dfb2e744d8974 loading-text",children:"Generating summary..."})]}):(0,r.jsx)("div",{className:"jsx-918dfb2e744d8974 summary-content",children:a})})]})]})}let ep="force-dynamic";function eu(){let{user:e,loading:t,signOut:a}=(0,o.a)();(0,n.useRouter)();let x=(0,l.N)(),{setPayload:b}=(0,c.T)(),p=(0,s.useRef)(new Map),[u,g]=(0,s.useState)(!1),[h,y]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[z,N]=(0,s.useState)([]),[S,E]=(0,s.useState)(!1),[C,M]=(0,s.useState)(!1),[A,R]=(0,s.useState)(""),[T,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{{let e=localStorage.getItem("haley_sidebarCollapsed");null!==e?g(!JSON.parse(e)):"desktop"===x.type&&g(!0)}},[x.type]),(0,s.useEffect)(()=>{localStorage.setItem("haley_sidebarCollapsed",JSON.stringify(!u))},[u]);let[_,P]=(0,s.useState)("single"),[F,L]=(0,s.useState)(null),[Z,U]=(0,s.useState)(!1),[O,G]=(0,s.useState)([]),[K,H]=(0,s.useState)({}),[J,W]=(0,s.useState)(new Set),[V,Q]=(0,s.useState)([]),[X,Y]=(0,s.useState)(""),[$,et]=(0,s.useState)([]),[ea,er]=(0,s.useState)(!1),[en,ei]=(0,s.useState)(!1),[ed,ep]=(0,s.useState)(null),[eu,eh]=(0,s.useState)(null),[ey,ev]=(0,s.useState)(!1),[ew,ej]=(0,s.useState)(!1),[ek,ez]=(0,s.useState)(!1),[eN,eS]=(0,s.useState)(""),[eE,eC]=(0,s.useState)(null),[eM,eA]=(0,s.useState)(""),[eR,eT]=(0,s.useState)(!1),eD=(0,s.useRef)(null),[e_,eP]=(0,s.useState)([]),[eI,eF]=(0,s.useState)("default"),[eL,eZ]=(0,s.useState)({haley:[],gemini:[],gpt:[],claude:[],llama:[],perplexity:[],mistral:[],grok:[]}),[eU,eO]=(0,s.useState)(!1);(0,s.useEffect)(()=>{L(localStorage.getItem("haley_lastUsedModel")||"haley")},[]),(0,s.useEffect)(()=>{F&&localStorage.setItem("haley_lastUsedModel",F)},[F]),(0,s.useEffect)(()=>{if(e){eG(),eB(),eK();let e=setInterval(eK,3e4);return()=>clearInterval(e)}},[e,t]),(0,s.useEffect)(()=>()=>{p.current.forEach(e=>e()),p.current.clear()},[]),(0,s.useEffect)(()=>{let e=[];V.forEach(t=>{var a,r,s,o;if("assistant"===t.role&&!(null===(a=t.metadata)||void 0===a?void 0:a.streaming)&&!(null===(r=t.metadata)||void 0===r?void 0:r.isMultiLLM)){let{artifacts:a}=function(e,t){let a;let r=[],s=/```(\w+)?\n([\s\S]*?)```/g,o=0;for(;null!==(a=s.exec(e));){let e=a[1]||"text",s=a[2].trim();r.push({id:"".concat(t,"-artifact-").concat(o),type:"code",content:s,language:e,title:"Code Block ".concat(o+1),messageId:t}),o++}return{artifacts:r,cleanedContent:e.replace(s,"\n[Code artifact]\n").trim()}}(t.content,t.id);e.push(...a)}if((null===(s=t.metadata)||void 0===s?void 0:s.isMultiLLM)&&(null===(o=t.metadata)||void 0===o?void 0:o.providers)){let a=t.metadata.providers,r=t.metadata.providerResponses||{},s=t.metadata.completedProviders||[];a.forEach(a=>{let o=r[a]||"",n=!s.includes(a)&&o.length>0;e.push({id:"".concat(t.id,"-").concat(a),type:"llm-response",content:o,title:a.charAt(0).toUpperCase()+a.slice(1),messageId:t.id,modelId:a,isStreaming:n})})}}),e.length>0&&N(e)},[V]),(0,s.useEffect)(()=>{E(V.some(e=>{var t,a;return(null===(t=e.metadata)||void 0===t?void 0:t.isMultiLLM)&&(null===(a=e.metadata)||void 0===a?void 0:a.allProvidersComplete)===!0}))},[V]);let eB=async()=>{if(null==e?void 0:e.uid)try{let t=await (0,i.LF)(e.uid);eP(t)}catch(e){console.error("Error loading conversations:",e)}},eG=()=>{Q([{id:eg(),role:"system",content:"Haley OS initialized. Multi-LLM router active. Ready to assist.",timestamp:new Date,metadata:{operation:"system_init"}}])},eK=async()=>{try{let e=await (0,i.x$)();eh(e)}catch(e){console.error("Failed to load system status:",e)}},eH=async(e,t)=>{let a=e||X;if(!X.trim()&&!t&&0===$.length)return;if(!t&&Z&&O.length>0){let e={id:eg(),role:"user",content:a,timestamp:new Date,attachments:$.length>0?[...$]:void 0};Q(t=>[...t,e]),Y(""),eU&&eO(!1);let t=eg(),r={id:t,role:"assistant",content:"",timestamp:new Date,metadata:{operation:"multi-llm",isMultiLLM:!0,providers:O,streaming:!0,providerResponses:{},completedProviders:[]}};Q(e=>[...e,r]);let s={},o={};O.forEach(e=>{s[e]="",o[e]=""});try{let e=$.length>0?$:void 0,r=await (0,i.rf)(a,O,(e,a)=>{o[e]+=a,Q(a=>a.map(a=>{var r;return a.id===t?{...a,metadata:{...a.metadata,providerResponses:{...null===(r=a.metadata)||void 0===r?void 0:r.providerResponses,[e]:o[e]}}}:a}))},(e,a)=>{Q(a=>a.map(a=>{if(a.id===t){var r;let t=(null===(r=a.metadata)||void 0===r?void 0:r.completedProviders)||[],s=t.includes(e)?t:[...t,e],o=s.length===O.length;return{...a,metadata:{...a.metadata,completedProviders:s,streaming:!o,allProvidersComplete:o}}}return a}));let s=r.find(t=>t.provider===e);s&&(s.cleanup(),p.current.delete("".concat(t,"-").concat(e)))},(e,a)=>{console.error("[MULTI-LLM] ".concat(e," error:"),a),Q(r=>r.map(r=>{if(r.id===t){var s,o;let t=(null===(s=r.metadata)||void 0===s?void 0:s.completedProviders)||[],n=t.includes(e)?t:[...t,e],i=n.length===O.length;return{...r,metadata:{...r.metadata,providerResponses:{...null===(o=r.metadata)||void 0===o?void 0:o.providerResponses,[e]:"Error: ".concat(a)},completedProviders:n,streaming:!i,allProvidersComplete:i}}}return r}))},e);r.forEach(e=>{p.current.set("".concat(t,"-").concat(e.provider),e.cleanup)}),$.length>0&&et([])}catch(r){let e=r instanceof Error?r.message:"Failed to start multi-LLM query",a={};O.forEach(t=>{a[t]="Error: ".concat(e)}),Q(e=>e.map(e=>e.id===t?{...e,metadata:{...e.metadata,providerResponses:a,completedProviders:O,streaming:!1,allProvidersComplete:!0}}:e))}return}if(!F){L("gemini"),alert("Please select an AI model first. Defaulting to Gemini.");return}let r={id:eg(),role:"user",content:t?"[Voice message]":a,timestamp:new Date,attachments:$.length>0?[...$]:void 0};Q(e=>[...e,r]),Y(""),eU&&eO(!1);let s=eg(),o="",n={id:s,role:"assistant",content:"",timestamp:new Date,metadata:{operation:"chat",model_used:F,streaming:!0}};Q(e=>[...e,n]);try{let e=$.length>0?$:void 0,{messageId:r,cleanup:n}=t?await (0,i.l1)(t,F,e=>{o+=e,Q(e=>e.map(e=>e.id===s?{...e,content:o}:e))},e=>{Q(t=>t.map(t=>t.id===s?{...t,content:o,metadata:{...t.metadata,streaming:!1,model_used:e.model_used,baby_invoked:e.baby_invoked,task:e.task,supreme_court:"supreme-court"===_,llm_sources:F?[F]:void 0}}:t)),p.current.delete(s)},e=>{Q(t=>t.map(t=>t.id===s?{...t,content:"Error: ".concat(e),metadata:{...t.metadata,streaming:!1}}:t)),p.current.delete(s)}):await (0,i.bG)(a,F,e=>{o+=e,Q(e=>e.map(e=>e.id===s?{...e,content:o}:e))},e=>{Q(t=>t.map(t=>t.id===s?{...t,content:o,metadata:{...t.metadata,streaming:!1,model_used:e.model_used,baby_invoked:e.baby_invoked,task:e.task,supreme_court:"supreme-court"===_,llm_sources:F?[F]:void 0}}:t)),p.current.delete(s),eK()},e=>{p.current.delete(s),Q(t=>t.map(t=>t.id===s?{...t,content:"Error: ".concat(e),metadata:{...t.metadata,streaming:!1,error:!0}}:t))},e);p.current.set(s,n),$.length>0&&et([])}catch(e){Q(t=>t.map(t=>t.id===s?{...t,content:"Fatal error: ".concat(e instanceof Error?e.message:"Unknown error"),metadata:{...t.metadata,streaming:!1,error:!0}}:t))}},eJ=e=>{let t=e||"haley",a=F||"haley";eZ(e=>({...e,[a]:V}));let r=eL[t];r&&r.length>0?Q(r):Q([{id:eg(),role:"system",content:e?"Switched to ".concat(e.charAt(0).toUpperCase()+e.slice(1),". Ready to assist."):"Haley OS initialized. Multi-LLM router active. Ready to assist.",timestamp:new Date,metadata:{operation:"system_init",selectedModel:e}}]),L(e),eI&&eP(t=>t.map(t=>t.id===eI?{...t,modelMode:e}:t)),P("single")},eW=(0,s.useCallback)((e,t)=>{U(e),G(t)},[]),eq=async(e,t)=>{let a=V.findIndex(t=>t.id===e);if(a<=0)return;let r=V[a-1];if("user"!==r.role)return;Q(a=>a.map(a=>{var r,s;return a.id===e?{...a,metadata:{...a.metadata,providerResponses:{...null===(r=a.metadata)||void 0===r?void 0:r.providerResponses,[t]:""},completedProviders:((null===(s=a.metadata)||void 0===s?void 0:s.completedProviders)||[]).filter(e=>e!==t),streaming:!0,allProvidersComplete:!1}}:a}));let s="";try{let{messageId:a,cleanup:o}=await (0,i.bG)(r.content,t,a=>{s+=a,Q(a=>a.map(a=>{var r;return a.id===e?{...a,metadata:{...a.metadata,providerResponses:{...null===(r=a.metadata)||void 0===r?void 0:r.providerResponses,[t]:s}}}:a}))},a=>{Q(a=>a.map(a=>{if(a.id===e){var r,s;let e=(null===(r=a.metadata)||void 0===r?void 0:r.completedProviders)||[],o=e.includes(t)?e:[...e,t],n=(null===(s=a.metadata)||void 0===s?void 0:s.providers)||[],i=o.length===n.length;return{...a,metadata:{...a.metadata,completedProviders:o,streaming:!i,allProvidersComplete:i}}}return a})),o()},a=>{Q(r=>r.map(r=>{if(r.id===e){var s,o,n;let e=(null===(s=r.metadata)||void 0===s?void 0:s.completedProviders)||[],i=e.includes(t)?e:[...e,t],l=(null===(o=r.metadata)||void 0===o?void 0:o.providers)||[],d=i.length===l.length;return{...r,metadata:{...r.metadata,providerResponses:{...null===(n=r.metadata)||void 0===n?void 0:n.providerResponses,[t]:"Error: ".concat(a)},completedProviders:i,streaming:!d,allProvidersComplete:d}}}return r}))});p.current.set("".concat(e,"-").concat(t,"-retry"),o)}catch(a){Q(r=>r.map(r=>{var s;return r.id===e?{...r,metadata:{...r.metadata,providerResponses:{...null===(s=r.metadata)||void 0===s?void 0:s.providerResponses,[t]:"Error: ".concat(a instanceof Error?a.message:"Retry failed")},completedProviders:(()=>{var e;let a=(null===(e=r.metadata)||void 0===e?void 0:e.completedProviders)||[];return a.includes(t)?a:[...a,t]})()}}:r}))}},eV=async()=>{try{let e=d.migrateFullChat(V);b(e),await d.copyToClipboard(e),console.log("Chat migrated successfully:",e)}catch(e){console.error("Failed to migrate chat:",e)}},eQ=async()=>{if(eU)return;let e=eg(),t={id:e,title:"New Chat",lastMessage:"No messages yet",timestamp:new Date,lastActive:new Date,messageCount:0,modelMode:F||void 0};eP(e=>[t,...e]),eF(e),eG(),eO(!0),"desktop"!==x.type&&g(!1)},eX=async t=>{if(eF(t),eU&&eO(!1),null==e?void 0:e.uid){let a=await (0,i.j9)(e.uid,t);a&&a.messages&&a.messages.length>0?(Q(a.messages),L(a.modelMode)):eG()}"desktop"!==x.type&&g(!1)},eY=async t=>{if(null==e?void 0:e.uid)try{await (0,i.SJ)(e.uid,t),await eB(),t===eI&&eQ()}catch(e){console.error("Error deleting conversation:",e)}};if(t)return(0,r.jsx)("div",{className:"full-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gradient mb-4",children:"Haley OS"}),(0,r.jsxs)("div",{className:"typing-indicator",children:[(0,r.jsx)("div",{className:"typing-dot"}),(0,r.jsx)("div",{className:"typing-dot"}),(0,r.jsx)("div",{className:"typing-dot"})]})]})});if(!e)return(0,r.jsx)(em.Z,{});let e$=V.some(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.streaming)===!0}),e0=V.some(e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.operation)==="summary-offer"}),e1=async()=>{var e,t;E(!1),M(!0),D(!0),R("");let a=V.find(e=>{var t,a;return(null===(t=e.metadata)||void 0===t?void 0:t.isMultiLLM)&&(null===(a=e.metadata)||void 0===a?void 0:a.allProvidersComplete)});if(!a){D(!1),R("No multi-LLM responses found to summarize.");return}let r=(null===(e=a.metadata)||void 0===e?void 0:e.providerResponses)||{},s=(null===(t=a.metadata)||void 0===t?void 0:t.providers)||[],o="Summarize and compare these AI responses:\n\n".concat(s.map(e=>"".concat(e.toUpperCase(),": ").concat(r[e])).join("\n\n")),n="";try{let{messageId:e,cleanup:t}=await (0,i.bG)(o,"haley",e=>{n+=e,R(n)},e=>{D(!1),t()},e=>{R("Error generating summary: ".concat(e)),D(!1)})}catch(e){R("Failed to generate summary: ".concat(e instanceof Error?e.message:"Unknown error")),D(!1)}};return(0,r.jsxs)("div",{className:"full-screen flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"space-bg",children:[(0,r.jsx)("div",{className:"stars"}),[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"shooting-star",style:{top:"".concat(50*Math.random(),"%"),right:"".concat(50*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s")}},t))]}),(0,r.jsx)(m.Z,{isOpen:u,onClose:()=>g(!u),onToggle:()=>g(!u),onSignOut:a,conversations:e_,currentConversationId:eI,onNewConversation:eQ,onSelectConversation:eX,onDeleteConversation:eY,activeModel:F,onSelectModel:eJ,userName:e.displayName||void 0,userEmail:e.email||void 0,userPhotoURL:e.photoURL||void 0,onRecoverChat:()=>console.log("Recover chat not yet implemented"),onMigrateChat:eV,onMultiLLMChange:eW}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col relative z-10 transition-all duration-300 ".concat("desktop"===x.type?u?"ml-80":"ml-[60px]":"ml-0"),children:[(0,r.jsx)(eo,{isPlaying:ey,isListening:ew,hasError:ek,errorMessage:eN}),eE&&(0,r.jsx)(el,{audioUrl:eE,isPlaying:eR,onPlayPause:()=>{eD.current&&(eR?eD.current.pause():eD.current.play())},onClose:()=>{eD.current&&(eD.current.pause(),eD.current=null),eC(null),eT(!1)},text:eM}),(0,r.jsx)(f,{aiMode:_,activeModels:F?[F]:["Haley"],activeModel:F,onToggleResearch:()=>er(!ea),onToggleSidebar:()=>g(!u),onOpenMagicWindow:()=>y(!h),systemStatus:eu,researchEnabled:ea,logicEngineEnabled:en,onToggleLogicEngine:()=>ei(!en),onMigrateChat:eV}),(0,r.jsx)(I,{messages:V,isLoading:e$,onRetryMessage:e=>{let t=V.findIndex(t=>t.id===e);if(t>0){let e=V[t-1];"user"===e.role&&eH(e.content)}},onBranchMessage:e=>{console.log("Branch conversation from message:",e)},onStreamingComplete:()=>{},onRetryProvider:eq,onAudioReady:(e,t)=>{eC(e),eA(t);let a=new Audio(e);eD.current=a,a.onplay=()=>eT(!0),a.onpause=()=>eT(!1),a.onended=()=>{eT(!1),eC(null)},a.play()},onVoiceError:e=>{ez(!0),eS(e),setTimeout(()=>ez(!1),5e3)},onMultiLLMSummary:e1}),($.length>0||z.length>0)&&(0,r.jsx)(q,{files:$,artifacts:z,onRemoveFile:e=>{et(t=>{let a=[...t];return a.splice(e,1),a})},onRemoveArtifact:e=>{N(t=>t.filter(t=>t.id!==e))},sidebarOpen:u&&"desktop"===x.type}),e0&&(0,r.jsx)(ex,{suggestions:["Yes"],onSelect:e=>{eH(e)},sidebarOpen:u&&"desktop"===x.type}),S&&(0,r.jsx)(eb,{onClick:e1,sidebarOpen:u&&"desktop"===x.type}),C&&(0,r.jsx)(ef,{isLoading:T,summaryText:A,onClose:()=>M(!1),sidebarOpen:u&&"desktop"===x.type}),(0,r.jsx)(B,{input:X,setInput:Y,isLoading:!1,onSend:eH,onFileUpload:e=>{let t=Array.from(e);et(e=>[...e,...t])},onGallerySelect:()=>{console.log("Gallery selection")},sidebarOpen:u&&"desktop"===x.type,onRecordingStart:()=>ej(!0),onRecordingStop:()=>ej(!1),pendingUploads:$}),(0,r.jsx)(ee,{isOpen:h,content:ed,researchEnabled:ea,logicEngineEnabled:en,onClose:()=>y(!1)}),(0,r.jsx)(es,{isOpen:v,currentMode:_,activeModel:F,onClose:()=>w(!1),onSelectMode:e=>{"haley"===e&&eJ(null)},onSelectModel:eJ,availableModels:[{id:"gemini",name:"Gemini",provider:"Google"},{id:"gpt",name:"GPT-4",provider:"OpenAI"},{id:"claude",name:"Claude",provider:"Anthropic"},{id:"llama",name:"Llama",provider:"Meta"},{id:"perplexity",name:"Perplexity",provider:"Perplexity AI"},{id:"mistral",name:"Mistral",provider:"Mistral AI"},{id:"grok",name:"Grok",provider:"xAI"}],availableAgents:[]}),j&&z.length>0&&(0,r.jsx)(ec,{artifacts:z,onClose:()=>k(!1)})]})]})}function eg(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}},2453:function(e,t,a){"use strict";a.d(t,{AIClipboardProvider:function(){return n},T:function(){return i}});var r=a(7437),s=a(2265);let o=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,s.useState)(null),[i,l]=(0,s.useState)(null);return(0,r.jsx)(o.Provider,{value:{payload:a,setPayload:e=>{n(e),l(new Date)},clearPayload:()=>{n(null),l(null)},lastMigrationTime:i},children:t})}function i(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAIClipboard must be used within an AIClipboardProvider");return e}},8243:function(e,t,a){"use strict";a.d(t,{LF:function(){return l},SJ:function(){return c},bG:function(){return s},j9:function(){return d},l1:function(){return n},rf:function(){return o},x$:function(){return i}});let r="http://localhost:8080";async function s(e,t,a,s,o,n){let i=null;try{let l;if(!t){let e="Provider must be specified - no model selected";throw null==o||o(e),Error(e)}try{if(n&&n.length>0){let a=e=>new Promise((t,a)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>{let e=r.result.split(",")[1];t(e)},r.onerror=e=>a(e)}),s=await Promise.all(n.map(async(e,t)=>{let r=await a(e);return{filename:e.name,data:r,contentType:e.type||"application/octet-stream"}}));l=await fetch("".concat(r,"/chat/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:"default",user_id:"user",message:e,provider:t,attachments:s})})}else l=await fetch("".concat(r,"/chat/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:"default",user_id:"user",message:e,provider:t})})}catch(e){throw e}if(!l.ok)throw await l.text(),Error("Submit failed: ".concat(l.status));let{assistant_message_id:d}=await l.json(),c="".concat(r,"/chat/stream/").concat(d);i=new EventSource(c);let m="",x={};return i.onopen=()=>{console.log("[STREAM] ✅ EventSource connected to:",c)},i.onmessage=e=>{console.log("[STREAM] \uD83D\uDCE8 Received SSE event:",e.data);try{var r,n;let l=JSON.parse(e.data);if(console.log("[STREAM] \uD83D\uDCE6 Parsed data:",l),"token"===l.type)console.log("[STREAM] \uD83D\uDD25 Token received:",null===(r=l.content)||void 0===r?void 0:r.substring(0,50)),m+=l.content,null==a||a(l.content);else if("done"===l.type){console.log("[STREAM] ✅ Done event received, fullResponse length:",m.length),x=l.metadata||{};let e=(null===(n=l.result)||void 0===n?void 0:n.response)||l.response||m;if(e&&e!==m&&e.length>m.length){let t=e.substring(m.length);console.log("[STREAM] \uD83D\uDCDD Emitting remaining content:",t.length,"chars"),null==a||a(t),m=e}console.log("[STREAM] \uD83C\uDFC1 Closing stream, final response length:",m.length),null==i||i.close(),null==s||s({status:"completed",result:{response:m,...x},model_used:t,task:x.task||"general",operation:"chat",baby_invoked:x.baby_invoked||!1})}else"error"===l.type?(console.error("[STREAM] ❌ Error event received:",l.error),null==i||i.close(),null==o||o(l.error)):"status"===l.type?console.log("[STREAM] \uD83D\uDCCA Status event:",l.status):console.warn("[STREAM] ⚠️ Unknown event type:",l.type,l)}catch(t){console.error("[STREAM] ❌ Parse error:",t,"Raw data:",e.data),null==o||o("Failed to parse stream data: ".concat(t instanceof Error?t.message:"Unknown error")),null==i||i.close()}},i.onerror=e=>{console.error("[STREAM] ❌ EventSource error:",e),console.error("[STREAM] EventSource readyState:",null==i?void 0:i.readyState),null==i||i.close(),null==o||o("Connection error - stream readyState: ".concat(null==i?void 0:i.readyState))},{messageId:d,cleanup:()=>{i&&(i.close(),i=null)}}}catch(e){throw console.error("[HaleyAPI] Error:",e),i&&i.close(),null==o||o(e instanceof Error?e.message:"Unknown error"),e}}async function o(e,t,a,r,o,n){return await Promise.all(t.map(async t=>{try{let{messageId:i,cleanup:l}=await s(e,t,e=>null==a?void 0:a(t,e),e=>null==r?void 0:r(t,e),e=>null==o?void 0:o(t,e),n);return{provider:t,messageId:i,cleanup:l}}catch(e){return null==o||o(t,e instanceof Error?e.message:"Failed to start stream"),{provider:t,messageId:"",cleanup:()=>{}}}}))}async function n(e,t,a,s,o){let n=null;try{if(!t){let e="Provider must be specified - no model selected";throw null==o||o(e),Error(e)}let i=new FormData;i.append("audio_file",e,"voice_message.webm");let l="".concat(r,"/chat/submit/audio?conversation_id=default&provider=").concat(t),d=await fetch(l,{method:"POST",body:i});if(!d.ok){let e=await d.text();throw Error("Audio submit failed: ".concat(d.status," - ").concat(e))}let{assistant_message_id:c,transcript:m}=await d.json();n=new EventSource("".concat(r,"/chat/stream/").concat(c));let x="",b={};return n.onmessage=e=>{console.log("[AUDIO-STREAM] \uD83D\uDCE8 Received SSE event:",e.data);try{let r=JSON.parse(e.data);console.log("[AUDIO-STREAM] \uD83D\uDCE6 Parsed data:",r),"token"===r.type?(console.log("[AUDIO-STREAM] \uD83D\uDD25 Token received"),x+=r.content,null==a||a(r.content)):"done"===r.type?(console.log("[AUDIO-STREAM] ✅ Done event, length:",x.length),b=r.metadata||{},null==n||n.close(),null==s||s({status:"completed",result:{response:x,...b},model_used:t,task:b.task||"general",operation:"chat",baby_invoked:b.baby_invoked||!1})):"error"===r.type&&(console.error("[AUDIO-STREAM] ❌ Error event:",r.error),null==n||n.close(),null==o||o(r.error))}catch(t){console.error("[AUDIO-STREAM] ❌ Parse error:",t,"Raw data:",e.data),null==o||o("Audio stream parse error: ".concat(t instanceof Error?t.message:"Unknown")),null==n||n.close()}},n.onerror=e=>{console.error("[AUDIO-STREAM] ❌ EventSource error:",e),console.error("[AUDIO-STREAM] readyState:",null==n?void 0:n.readyState),null==n||n.close(),null==o||o("Audio stream connection error - readyState: ".concat(null==n?void 0:n.readyState))},{messageId:c,transcript:m,cleanup:()=>{n&&(n.close(),n=null)}}}catch(e){throw console.error("[HaleyAPI] Audio Error:",e),n&&n.close(),null==o||o(e instanceof Error?e.message:"Unknown error"),e}}async function i(){try{let e=await fetch("".concat(r,"/logic/system/health"));if(!e.ok)throw Error("Status check failed: ".concat(e.status));let t=await e.json();return{os:"Haley OS",kernel_status:{kernel:"Logic Engine",syscalls:t.requests_processed||0,processes:1,modules:t.modules_registered||0,memory_keys:t.state_size||0},baby_pid:1001,note:"Multi-LLM Router Active"}}catch(e){return{os:"Haley OS",kernel_status:{kernel:"Logic Engine",syscalls:0,processes:1,modules:0,memory_keys:0},baby_pid:1001,note:"Multi-LLM Router Active"}}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=await fetch("".concat(r,"/chat/conversations/").concat(e,"?limit=").concat(t));if(!a.ok)throw Error("Failed to load conversations: ".concat(a.statusText));return(await a.json()).conversations||[]}catch(e){return console.error("[API] Load conversations failed:",e),[]}}async function d(e,t){try{let a=await fetch("".concat(r,"/chat/conversations/").concat(e,"/").concat(t));if(!a.ok){if(404===a.status)return null;throw Error("Failed to load conversation: ".concat(a.statusText))}return await a.json()}catch(e){return console.error("[API] Load conversation failed:",e),null}}async function c(e,t){try{let a=await fetch("".concat(r,"/chat/conversations/").concat(e,"/").concat(t),{method:"DELETE"});if(!a.ok)throw Error("Failed to delete conversation: ".concat(a.statusText));return await a.json()}catch(e){throw console.error("[API] Delete conversation failed:",e),e}}}},function(e){e.O(0,[139,647,872,865,478,971,23,744],function(){return e(e.s=1542)}),_N_E=e.O()}]);