(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[836],{7638:function(e,n,t){Promise.resolve().then(t.bind(t,6141))},6141:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var r=t(7437),a=t(2265),o=t(6463),s=t(2177),i=t(7515),l=t(4109),c=t(5733),d=t(7746),u=t(9590),m=t(2468),p=t(6884),x=t(7164),h=t(8662),g=t(7776),b=t(8938);function w(){(0,o.useRouter)();let e=(0,a.useRef)(null),n=(0,a.useRef)(null),t=(0,a.useRef)(null),w=(0,a.useRef)(null),f=(0,a.useRef)(null),y=(0,a.useRef)(null),[v,j]=(0,a.useState)(""),[k,N]=(0,a.useState)(!1),[z,C]=(0,a.useState)(null),[S,P]=(0,a.useState)(null),[E,R]=(0,a.useState)("preview"),[M,B]=(0,a.useState)(!1),A=()=>{if(!e.current)return;n.current&&(n.current.dispose(),e.current.contains(n.current.domElement)&&e.current.removeChild(n.current.domElement)),y.current&&cancelAnimationFrame(y.current);let r=e.current.clientWidth,a=new h.xsS;a.background=new h.Ilk(1711650),a.fog=new h.ybr(1711650,50,150),t.current=a;let o=new h.cPb(60,r/450,.1,1e3);o.position.set(30,25,30),o.lookAt(0,0,0),w.current=o;let s=new g.CP7({antialias:!0});s.setSize(r,450),s.setPixelRatio(Math.min(window.devicePixelRatio,2)),s.shadowMap.enabled=!0,s.shadowMap.type=h.ntZ,e.current.appendChild(s.domElement),n.current=s;let i=new b.z(o,s.domElement);i.enableDamping=!0,i.dampingFactor=.05,i.minDistance=10,i.maxDistance=100,i.maxPolarAngle=Math.PI/2.1,f.current=i;let l=new h.Mig(16777215,.4);a.add(l);let c=new h.Ox3(16777215,.8);c.position.set(20,30,20),c.castShadow=!0,c.shadow.mapSize.width=2048,c.shadow.mapSize.height=2048,c.shadow.camera.near=.5,c.shadow.camera.far=100,c.shadow.camera.left=-50,c.shadow.camera.right=50,c.shadow.camera.top=50,c.shadow.camera.bottom=-50,a.add(c);let d=new h.vmT(8900331,4021309,.3);a.add(d);let u=new h.VLJ(60,30,3817026,2764338);u.position.y=-.01,a.add(u);let m=()=>{y.current=requestAnimationFrame(m),i.update(),s.render(a,o)};m()},_=e=>{let n,t;let r=new h.Ilk(e.color||"#4a9eff"),a=e.name.toLowerCase();n=a.includes("neon")||a.includes("glow")||a.includes("flame")?new h.vBJ({color:r}):new h.Wid(a.includes("metal")||a.includes("sword")||a.includes("armor")?{color:r,metalness:.8,roughness:.2}:a.includes("glass")||a.includes("water")?{color:r,transparent:!0,opacity:.6}:{color:r,roughness:.7});let o=new h.ZAu;t="Ball"===e.shape||a.includes("leaves")||a.includes("head")||a.includes("ball")?new h.xo$(e.size.x/2,16,16):"Cylinder"===e.shape||a.includes("trunk")||a.includes("cylinder")||a.includes("coin")?new h.fHI(e.size.x/2,e.size.x/2,e.size.y,16):a.includes("cone")||a.includes("tower")?new h.b_z(e.size.x/2,e.size.y,16):new h.DvJ(e.size.x,e.size.y,e.size.z);let s=new h.Kj0(t,n);if(s.position.set(e.position.x,e.position.y,e.position.z),s.castShadow=!0,s.receiveShadow=!0,s.name=e.name,e.rotation&&s.rotation.set(h.M8C.degToRad(e.rotation.x||0),h.M8C.degToRad(e.rotation.y||0),h.M8C.degToRad(e.rotation.z||0)),o.add(s),a.includes("tree")&&!a.includes("trunk")&&!a.includes("leaves")){let n=new h.fHI(.5,.7,6,8),t=new h.Wid({color:9127187,roughness:.9}),r=new h.Kj0(n,t);r.position.set(e.position.x,e.position.y+3,e.position.z),r.castShadow=!0,o.add(r);let a=new h.xo$(3,12,12),i=new h.Wid({color:2263842,roughness:.8}),l=new h.Kj0(a,i);l.position.set(e.position.x,e.position.y+7,e.position.z),l.castShadow=!0,o.add(l),o.remove(s)}if(a.includes("dragon")){let n=new h.DvJ(8,.3,4),t=new h.Wid({color:r,transparent:!0,opacity:.7}),a=new h.Kj0(n,t);a.position.set(e.position.x+5,e.position.y+2,e.position.z),a.rotation.z=h.M8C.degToRad(20),o.add(a);let s=new h.Kj0(n,t);s.position.set(e.position.x-5,e.position.y+2,e.position.z),s.rotation.z=h.M8C.degToRad(-20),o.add(s)}return o},L=e=>{if(!t.current)return;let n=[];if(t.current.traverse(e=>{(e instanceof h.Kj0||e instanceof h.ZAu)&&!(e instanceof h.VLJ)&&n.push(e)}),n.forEach(e=>{e.parent===t.current&&t.current.remove(e)}),!t.current.children.find(e=>e instanceof h.VLJ)){let e=new h.VLJ(60,30,3817026,2764338);e.position.y=-.01,t.current.add(e)}e.elements.forEach(e=>{let n=_(e);t.current.add(n)}),w.current&&f.current&&(w.current.position.set(30,25,30),f.current.target.set(0,5,0),f.current.update())};(0,a.useEffect)(()=>{if((null==S?void 0:S.preview_config)&&"preview"===E){let e=setTimeout(()=>{A(),L(S.preview_config)},100);return()=>clearTimeout(e)}},[S,E]),(0,a.useEffect)(()=>()=>{y.current&&cancelAnimationFrame(y.current),n.current&&n.current.dispose()},[]),(0,a.useEffect)(()=>{let t=()=>{if(!e.current||!n.current||!w.current)return;let t=e.current.clientWidth;w.current.aspect=t/450,w.current.updateProjectionMatrix(),n.current.setSize(t,450)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);let T=async()=>{if(!v.trim()){C("Please describe a scene first.");return}C(null),N(!0),P(null);try{let e=await fetch("https://module-matrix-409495160162.us-central1.run.app/matrix/execute_module",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({module:"robloxexpert",action:"generate_scene",params:{description:v}})});if(!e.ok)throw Error("Generation failed: ".concat(e.statusText));let n=await e.json();P(n.result),R("preview")}catch(e){console.error("[RobloxExpert] Error:",e),P({lua_code:"-- Scene: ".concat(v,'\n-- Generated by Roblox Expert\n\nlocal Workspace = game:GetService("Workspace")\nlocal Lighting = game:GetService("Lighting")\n\n-- Clear existing generated content\nfor _, child in pairs(Workspace:GetChildren()) do\n    if child:GetAttribute("HaleyGenerated") then\n        child:Destroy()\n    end\nend\n\n-- Environment Setup\nlocal floor = Instance.new("Part")\nfloor.Name = "Floor"\nfloor:SetAttribute("HaleyGenerated", true)\nfloor.Size = Vector3.new(50, 1, 50)\nfloor.Position = Vector3.new(0, -0.5, 0)\nfloor.Anchored = true\nfloor.BrickColor = BrickColor.new("Bright green")\nfloor.Material = Enum.Material.Grass\nfloor.Parent = Workspace\n\n-- Main Character\nlocal character = Instance.new("Model")\ncharacter.Name = "MainCharacter"\ncharacter:SetAttribute("HaleyGenerated", true)\n\nlocal body = Instance.new("Part")\nbody.Name = "Body"\nbody.Size = Vector3.new(2, 3, 1)\nbody.Position = Vector3.new(0, 3.5, 0)\nbody.Anchored = true\nbody.BrickColor = BrickColor.new("Bright blue")\nbody.Material = Enum.Material.SmoothPlastic\nbody.Parent = character\n\nlocal head = Instance.new("Part")\nhead.Name = "Head"\nhead.Size = Vector3.new(1.5, 1.5, 1.5)\nhead.Position = Vector3.new(0, 5.75, 0)\nhead.Anchored = true\nhead.BrickColor = BrickColor.new("Light orange")\nhead.Material = Enum.Material.SmoothPlastic\nhead.Parent = character\n\ncharacter.Parent = Workspace\n\n-- Tree\nlocal tree = Instance.new("Model")\ntree.Name = "Tree"\ntree:SetAttribute("HaleyGenerated", true)\n\nlocal trunk = Instance.new("Part")\ntrunk.Name = "Trunk"\ntrunk.Size = Vector3.new(2, 8, 2)\ntrunk.Position = Vector3.new(10, 4, 5)\ntrunk.Anchored = true\ntrunk.BrickColor = BrickColor.new("Reddish brown")\ntrunk.Material = Enum.Material.Wood\ntrunk.Parent = tree\n\nlocal leaves = Instance.new("Part")\nleaves.Name = "Leaves"\nleaves.Shape = Enum.PartType.Ball\nleaves.Size = Vector3.new(8, 8, 8)\nleaves.Position = Vector3.new(10, 10, 5)\nleaves.Anchored = true\nleaves.BrickColor = BrickColor.new("Dark green")\nleaves.Material = Enum.Material.Grass\nleaves.Parent = tree\n\ntree.Parent = Workspace\n\n-- Rock\nlocal rock = Instance.new("Part")\nrock.Name = "Rock"\nrock:SetAttribute("HaleyGenerated", true)\nrock.Size = Vector3.new(3, 2, 3)\nrock.Position = Vector3.new(-8, 1, -6)\nrock.Anchored = true\nrock.BrickColor = BrickColor.new("Dark stone grey")\nrock.Material = Enum.Material.Slate\nrock.Parent = Workspace\n\nprint("Scene generated successfully!")'),preview_config:{elements:[{type:"Part",name:"Floor",position:{x:0,y:-.5,z:0},size:{x:50,y:1,z:50},color:"#4ade80"},{type:"Part",name:"Body",position:{x:0,y:3.5,z:0},size:{x:2,y:3,z:1},color:"#3b82f6"},{type:"Part",name:"Head",position:{x:0,y:5.75,z:0},size:{x:1.5,y:1.5,z:1.5},color:"#fdba74",shape:"Ball"},{type:"Part",name:"Trunk",position:{x:10,y:4,z:5},size:{x:2,y:8,z:2},color:"#92400e",shape:"Cylinder"},{type:"Part",name:"Leaves",position:{x:10,y:10,z:5},size:{x:8,y:8,z:8},color:"#166534",shape:"Ball"},{type:"Part",name:"Rock",position:{x:-8,y:1,z:-6},size:{x:3,y:2,z:3},color:"#4b5563"},{type:"Part",name:"Trunk",position:{x:-12,y:3,z:8},size:{x:1.5,y:6,z:1.5},color:"#78350f",shape:"Cylinder"},{type:"Part",name:"Leaves",position:{x:-12,y:8,z:8},size:{x:6,y:6,z:6},color:"#15803d",shape:"Ball"}],lighting:"default",environment:"forest"},elements_created:8}),R("preview")}finally{N(!1)}},V=async()=>{if(null==S?void 0:S.lua_code)try{await navigator.clipboard.writeText(S.lua_code),B(!0),setTimeout(()=>B(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto p-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"p-4 rounded-2xl bg-primary/10 border border-primary/20",children:(0,r.jsx)(s.Z,{size:48,className:"text-primary"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gradient mb-2",children:"Roblox Expert"}),(0,r.jsx)("p",{className:"text-secondary",children:"Describe a scene, get Roblox Lua code and preview"}),(0,r.jsx)("p",{className:"text-xs text-secondary/60 mt-1",children:"Built for kids - no coding required!"})]}),z&&(0,r.jsxs)("div",{className:"glass border border-red-500/30 bg-red-500/10 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,r.jsx)(i.Z,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm text-red-400",children:z})]}),!S&&(0,r.jsx)("div",{className:"glass rounded-xl border border-border p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-lg font-medium mb-3",children:"Describe your scene"}),(0,r.jsx)("textarea",{value:v,onChange:e=>j(e.target.value),placeholder:"Example: A forest with tall trees, a small pond, and a friendly dragon flying overhead...",rows:6,className:"w-full px-4 py-3 rounded-lg bg-panel-dark border border-border focus:border-primary focus:outline-none transition-colors resize-none text-sm"}),(0,r.jsx)("p",{className:"text-xs text-secondary mt-2",children:"Be descriptive! Mention characters, environments, colors, and actions you want to see."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,r.jsx)("button",{onClick:()=>j("A medieval castle with tall towers, a dragon guarding the entrance, and torches lighting the walls"),className:"px-3 py-2 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:"Castle & Dragon"}),(0,r.jsx)("button",{onClick:()=>j("A space station floating in the stars with robots walking around and glowing neon lights"),className:"px-3 py-2 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:"Space Station"}),(0,r.jsx)("button",{onClick:()=>j("A magical forest with colorful trees, sparkles floating in the air, and a friendly wizard"),className:"px-3 py-2 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:"Magic Forest"}),(0,r.jsx)("button",{onClick:()=>j("An underwater ocean scene with coral, fish swimming around, and a treasure chest on the sandy floor"),className:"px-3 py-2 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:"Underwater"})]}),(0,r.jsx)("button",{onClick:T,disabled:k||!v.trim(),className:"w-full px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium text-primary flex items-center justify-center gap-2",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{size:18,className:"animate-spin"}),"Generating Scene..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{size:18}),"Generate Scene"]})})]})}),S&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-400"}),(0,r.jsx)("span",{className:"text-sm",children:"Scene Generated"})]}),(0,r.jsxs)("span",{className:"text-xs text-secondary",children:[S.elements_created," elements created"]})]}),(0,r.jsx)("button",{onClick:()=>{j(""),P(null),C(null)},className:"px-3 py-1.5 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:"New Scene"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>R("preview"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors text-sm ".concat("preview"===E?"bg-primary/20 text-primary":"bg-panel-light hover:bg-panel-medium"),children:[(0,r.jsx)(c.Z,{size:16}),"3D Preview"]}),(0,r.jsxs)("button",{onClick:()=>R("code"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors text-sm ".concat("code"===E?"bg-primary/20 text-primary":"bg-panel-light hover:bg-panel-medium"),children:[(0,r.jsx)(d.Z,{size:16}),"Lua Code"]})]}),"preview"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"3D Scene Preview"}),(0,r.jsxs)("button",{onClick:()=>{w.current&&f.current&&(w.current.position.set(30,25,30),f.current.target.set(0,5,0),f.current.update())},className:"flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:[(0,r.jsx)(u.Z,{size:14}),"Reset View"]})]}),(0,r.jsx)("div",{ref:e,className:"w-full rounded-lg border border-border overflow-hidden",style:{height:"450px",background:"#1a1e22"}}),(0,r.jsx)("p",{className:"text-xs text-secondary text-center mt-4",children:"Drag to rotate, scroll to zoom. The actual scene in Roblox Studio will have more detail!"})]}),"code"===E&&(0,r.jsxs)("div",{className:"glass rounded-xl border border-border overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border bg-panel-dark",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Lua Code"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("button",{onClick:V,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-lg bg-panel-light hover:bg-panel-medium transition-colors",children:[M?(0,r.jsx)(m.Z,{size:14}):(0,r.jsx)(p.Z,{size:14}),M?"Copied!":"Copy"]})})]}),(0,r.jsx)("pre",{className:"p-4 text-sm font-mono overflow-x-auto max-h-[500px] overflow-y-auto",children:(0,r.jsx)("code",{className:"text-green-400",children:S.lua_code})})]}),(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsxs)("button",{onClick:()=>{if(!(null==S?void 0:S.lua_code))return;let e=new Blob([S.lua_code],{type:"text/plain"}),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="roblox_scene.lua",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)},className:"flex-1 px-6 py-3 rounded-lg bg-primary/20 hover:bg-primary/30 transition-colors text-sm font-medium text-primary flex items-center justify-center gap-2",children:[(0,r.jsx)(x.Z,{size:18}),"Export to Studio (.lua)"]})}),(0,r.jsxs)("div",{className:"glass rounded-xl border border-border p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"How to use in Roblox Studio"}),(0,r.jsxs)("ol",{className:"space-y-2 text-sm text-secondary",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-primary",children:"1."}),"Open Roblox Studio and create a new place (or open an existing one)"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-primary",children:"2."}),"Go to View â†’ Command Bar (or press Ctrl+Shift+C)"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-primary",children:"3."}),"Copy the Lua code above and paste it into the Command Bar"]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-primary",children:"4."}),"Press Enter to run the code and watch your scene appear!"]})]})]})]})]})})}}},function(e){e.O(0,[689,870,560,971,23,744],function(){return e(e.s=7638)}),_N_E=e.O()}]);